<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>忘归</title>
  
  <subtitle>愿得朱衣暗点头。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://jalan.space/"/>
  <updated>2020-09-12T14:35:54.292Z</updated>
  <id>http://jalan.space/</id>
  
  <author>
    <name>Jalan.江佳扬</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MySQL 覆盖索引与延迟关联</title>
    <link href="http://jalan.space/2020/09/01/2020/mysql-using-index/"/>
    <id>http://jalan.space/2020/09/01/2020/mysql-using-index/</id>
    <published>2020-09-01T12:35:00.000Z</published>
    <updated>2020-09-12T14:35:54.292Z</updated>
    
    <content type="html"><![CDATA[<p>在了解覆盖索引与延迟关联前，我们先简单建立一个订单表 Orders 用于举例说明。表中共包含 3 个字段：</p><ul><li><code>id</code>：订单 ID，<code>int</code> 类型，主键自增长</li><li><code>product_id</code>：商品 ID，在此列上建立索引</li><li><code>name</code>：订单名称</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`orders`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'订单 ID'</span>,</span><br><span class="line">  <span class="string">`product_id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品 ID'</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_unicode_ci <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'订单名称'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`product_idx`</span> (<span class="string">`product_id`</span>) <span class="keyword">USING</span> BTREE</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COLLATE</span>=utf8_unicode_ci;</span><br></pre></td></tr></table></figure><h2 id="覆盖索引"><a href="#覆盖索引" class="headerlink" title="覆盖索引"></a>覆盖索引</h2><h3 id="什么是覆盖索引？"><a href="#什么是覆盖索引？" class="headerlink" title="什么是覆盖索引？"></a>什么是覆盖索引？</h3><p>我们知道，如果 MySQL <strong>根据索引</strong>查找到数据，但索引的叶子结点中并<strong>不包含</strong>我们所需要的数据字段，那么仍然需要进行回表查询。</p><p>如果一个索引包含（覆盖）我们所需要查询的所有字段值，我们就称之为「<strong>覆盖索引</strong>」。</p><h3 id="MyISAM"><a href="#MyISAM" class="headerlink" title="MyISAM"></a>MyISAM</h3><p>当使用  MyISAM 存储引擎时，由于我们在 <code>product_id</code> 建立了索引，所以 <code>SELECT product_id FROM orders</code> 将使用覆盖索引：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql&gt; EXPLAIN SELECT product_id FROM orders;</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+-------+---------------+-------------+---------+------+------+----------+-------------+</span></span><br><span class="line">| id | select_type | table  | partitions | type  | possible_keys | key         | key_len | ref  | rows | filtered | Extra       |</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+-------+---------------+-------------+---------+------+------+----------+-------------+</span></span><br><span class="line">|  1 | SIMPLE      | orders | NULL       | index | NULL          | product_idx | 5       | NULL |    2 |   100.00 | Using index |</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+-------+---------------+-------------+---------+------+------+----------+-------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>如果我们在查询字段中加入 <code>id</code> 列，即执行 <code>SELECT id, product_id FROM orders WHERE product_id = 1</code>，查询轨迹如下：</p><ol><li>在 <code>product_id</code> 索引树中找到 <code>product_id = 1</code> 子结点</li><li>通过该子结点指针读取磁盘上的数据行</li><li>取出数据行中的 <code>id</code> 字段</li></ol><p>由于 MyISAM 的叶子结点存储着指向数据行的指针，该查询多了一步回表操作，无法使用覆盖索引。</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql&gt; EXPLAIN SELECT id, product_id FROM orders WHERE product_id = 1;</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+------+---------------+-------------+---------+-------+------+----------+-------+</span></span><br><span class="line">| id | select_type | table  | partitions | type | possible_keys | key         | key_len | ref   | rows | filtered | Extra |</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+------+---------------+-------------+---------+-------+------+----------+-------+</span></span><br><span class="line">|  1 | SIMPLE      | orders | NULL       | ref  | product_idx   | product_idx | 5       | const |    1 |   100.00 | NULL  |</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+------+---------------+-------------+---------+-------+------+----------+-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9bd49ad003d84c65b67395f7bbd1c592~tplv-k3u1fbpfcp-zoom-1.image" alt="MyISAM 索引结构"></p><h3 id="InnoDB"><a href="#InnoDB" class="headerlink" title="InnoDB"></a>InnoDB</h3><p>InnoDB 与 MyISAM 的不同之处在于，InnoDB 的主键使用聚簇索引，而其<strong>二级索引的叶子结点保存着行的主键值</strong>。也就是说，二级索引不仅能覆盖其本身，也能覆盖到该行的主键值。</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c1e97a9099e1465ab51eed47171fb15d~tplv-k3u1fbpfcp-zoom-1.image" alt="InnoDB 二级索引的叶子结点包含行主键值"></p><p>由于 InnoDB 不同的数据存储方式，若使用 InnoDB 作为存储引擎，我们执行 <code>SELECT id, product_id FROM orders WHERE product_id = 1</code> 将得到如下结果：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql&gt; EXPLAIN SELECT id, product_id FROM orders WHERE product_id = 1;</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+------+---------------+-------------+---------+-------+------+----------+-------------+</span></span><br><span class="line">| id | select_type | table  | partitions | type | possible_keys | key         | key_len | ref   | rows | filtered | Extra       |</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+------+---------------+-------------+---------+-------+------+----------+-------------+</span></span><br><span class="line">|  1 | SIMPLE      | orders | NULL       | ref  | product_idx   | product_idx | 5       | const |    1 |   100.00 | Using index |</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+------+---------------+-------------+---------+-------+------+----------+-------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure><p>可以看到 <code>Extra</code> 显示 <code>Using index</code>，表示该查询使用了覆盖索引。该查询语句的查询轨迹如下：</p><ol><li>在二级索引 <code>product_id</code> 的索引树中找到 <code>product_id = 1</code> 的叶子结点</li><li>取出该叶子结点的行主键值 <code>id</code> 一并返回</li></ol><p>查询轨迹并未进行回表取值。</p><h3 id="覆盖索引的好处"><a href="#覆盖索引的好处" class="headerlink" title="覆盖索引的好处"></a>覆盖索引的好处</h3><h2 id="延迟关联"><a href="#延迟关联" class="headerlink" title="延迟关联"></a>延迟关联</h2><p>延迟关联（deferred join）指「延迟了对列的访问」，不直接获取所有需要的列。</p><p>在查询的第一阶段 MySQL 使用覆盖索引，再通过该覆盖索引查询到的结果到外层查询匹配锁需要的所有列值。</p><p>这样说有些抽象，我们来看看下面的例子。</p><h3 id="用延迟关联优化分页（LIMIT）"><a href="#用延迟关联优化分页（LIMIT）" class="headerlink" title="用延迟关联优化分页（LIMIT）"></a>用延迟关联优化分页（LIMIT）</h3><p>当使用 <code>LIMIT</code> 碰上较大偏移量时，例如 <code>LIMIT 10000, 20</code> 这样的查询，MySQL 需要查询 <code>10020</code> 条记录然后再返回最后的 20 条。前面的 10000 最终都会被抛弃，这样的代价非常高。</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql&gt; EXPLAIN SELECT * FROM orders LIMIT 10000, 20;</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------+</span></span><br><span class="line">| id | select_type | table  | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra |</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------+</span></span><br><span class="line">|  1 | SIMPLE      | orders | NULL       | ALL  | NULL          | NULL | NULL    | NULL |    2 |   100.00 | NULL  |</span><br><span class="line">+<span class="comment">----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------+</span></span><br></pre></td></tr></table></figure><p>优化此类分页查询的一个最简单的办法就是<strong>尽可能使用索引覆盖扫描，而不是查询所有列</strong>。然后根据需要再做一次关联，返回所需要的列。</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql&gt; EXPLAIN SELECT * FROM orders AS o1 JOIN (SELECT id FROM orders LIMIT 10000, 20) AS o2 ON o1.id = o2.id;</span><br><span class="line">+<span class="comment">----+-------------+------------+------------+-------+---------------+-------------+---------+------------+------+----------+-------------+</span></span><br><span class="line">| id | select_type | table      | partitions | type  | possible_keys | key         | key_len | ref        | rows | filtered | Extra       |</span><br><span class="line">+<span class="comment">----+-------------+------------+------------+-------+---------------+-------------+---------+------------+------+----------+-------------+</span></span><br><span class="line">|  1 | PRIMARY     | o1         | NULL       | ALL   | PRIMARY       | NULL        | NULL    | NULL       |    2 |   100.00 | NULL        |</span><br><span class="line">|  1 | PRIMARY     | &lt;derived2&gt; | NULL       | ref   | &lt;auto_key0&gt;   | &lt;auto_key0&gt; | 4       | test.o1.id |    2 |   100.00 | Using index |</span><br><span class="line">|  2 | DERIVED     | orders     | NULL       | index | NULL          | PRIMARY     | 4       | NULL       |    2 |   100.00 | Using index |</span><br><span class="line">+<span class="comment">----+-------------+------------+------------+-------+---------------+-------------+---------+------------+------+----------+-------------+</span></span><br></pre></td></tr></table></figure><p>这样一来，MySQL 在 SQL 语句的「内层」进行扫描时使用了覆盖索引，「外层」再通过索引树找到相关的数据行，直接减少了扫描的数据量。</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://book.douban.com/subject/23008813/" target="_blank" rel="noopener">《高性能 MySQL》</a></li></ul>]]></content>
    
    <summary type="html">
    
      如何使用覆盖索引优化查询
    
    </summary>
    
      <category term="Web屠龙刀" scheme="http://jalan.space/categories/Web%E5%B1%A0%E9%BE%99%E5%88%80/"/>
    
    
      <category term="MySQL" scheme="http://jalan.space/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Redis 中的 variable-precision SWAR 算法</title>
    <link href="http://jalan.space/2020/05/05/2020/variable-percision-swar/"/>
    <id>http://jalan.space/2020/05/05/2020/variable-percision-swar/</id>
    <published>2020-05-05T15:06:00.000Z</published>
    <updated>2020-05-06T13:42:17.811Z</updated>
    
    <content type="html"><![CDATA[<p>今天在看《Redis 设计与实现》中「二进制位数组」一章，书中讲述 <code>BITCOUNT</code> 命令时提及了「计算汉明重量（<em>Hamming Weight</em>）」，「汉明重量」是一串符号中<strong>非零符号</strong>的个数。</p><p>二进制位统计的常见算法有遍历算法、查表算法，在 <a href="https://leetcode-cn.com/problems/number-of-1-bits/" target="_blank" rel="noopener">LeetCode 191. 位1的个数</a> 一题中我也写过 <a href="https://leetcode-cn.com/problems/number-of-1-bits/solution/python-de-si-chong-xie-fa-by-jalan/" target="_blank" rel="noopener">相关题解</a>。Redis 在实现 <code>BITCOUNT</code> 命令时则使用了查表和 variable-precision SWAR 两种算法，本文将主要介绍 variable-precision SWAR 算法的实现原理。</p><h2 id="算法实现原理"><a href="#算法实现原理" class="headerlink" title="算法实现原理"></a>算法实现原理</h2><p>以计算 32 位二进制的汉明重量为例。</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 计算 32 位二进制的汉明重量</span></span><br><span class="line"><span class="keyword">uint32_t</span> swar(<span class="keyword">uint32_t</span> i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 步骤1</span></span><br><span class="line">i = (i &amp; <span class="number">0x55555555</span>) + ((i &gt;&gt; <span class="number">1</span>) &amp; <span class="number">0x55555555</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤2</span></span><br><span class="line">i = (i &amp; <span class="number">0x33333333</span>) + ((i &gt;&gt; <span class="number">2</span>) &amp; <span class="number">0x33333333</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤3</span></span><br><span class="line">i = (i &amp; <span class="number">0x0F0F0F0F</span>) + ((i &gt;&gt; <span class="number">4</span>) &amp; <span class="number">0x0F0F0F0F</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤4</span></span><br><span class="line">i = (i * (<span class="number">0x01010101</span>) &gt;&gt; <span class="number">24</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面拆分步骤进行分析。</p><h3 id="步骤一：-i-amp-0x55555555-i-gt-gt-1-amp-0x55555555"><a href="#步骤一：-i-amp-0x55555555-i-gt-gt-1-amp-0x55555555" class="headerlink" title="步骤一：(i &amp; 0x55555555) + ((i &gt;&gt; 1) &amp; 0x55555555)"></a>步骤一：(i &amp; 0x55555555) + ((i &gt;&gt; 1) &amp; 0x55555555)</h3><p><code>0x55555555</code> 的二进制表示为 <code>01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01</code>。</p><h4 id="i-amp-0x55555555"><a href="#i-amp-0x55555555" class="headerlink" title="i &amp; 0x55555555"></a>i &amp; 0x55555555</h4><p><code>i</code> 和 <code>0x55555555</code> 相与的结果偶数位全部置 0，奇数位与 <code>i</code> 保持一致。</p><h4 id="i-gt-gt-1"><a href="#i-gt-gt-1" class="headerlink" title="i &gt;&gt; 1"></a>i &gt;&gt; 1</h4><p>将 <code>i</code> 右移 1 位，丢弃最右边的奇数位，因此 <code>i</code> 中原奇数位变为偶数位，原偶数位变为奇数位。</p><h4 id="i-gt-gt-1-amp-0x55555555"><a href="#i-gt-gt-1-amp-0x55555555" class="headerlink" title="(i &gt;&gt; 1) &amp; 0x55555555"></a>(i &gt;&gt; 1) &amp; 0x55555555</h4><p>令 <code>i &gt;&gt; 1</code> 的结果为 <code>x</code>，则 <code>x &amp; 0x55555555</code> 的结果偶数位全部置 0，奇数位与 <code>x</code> 中奇数位保持一致。而 <code>x</code> 中的奇数位是 <code>i</code> 中的偶数位。</p><h4 id="i-amp-0x55555555-i-gt-gt-1-amp-0x55555555"><a href="#i-amp-0x55555555-i-gt-gt-1-amp-0x55555555" class="headerlink" title="(i &amp; 0x55555555) + ((i &gt;&gt; 1) &amp; 0x55555555)"></a>(i &amp; 0x55555555) + ((i &gt;&gt; 1) &amp; 0x55555555)</h4><p><code>(i &amp; 0x55555555) + ((i &gt;&gt; 1) &amp; 0x55555555)</code> 中，按每个二进制位为一组进行分组，各组的十进制表示就是该组的汉明重量。</p><hr><h3 id="步骤二：-i-amp-0x33333333-i-gt-gt-2-amp-0x33333333"><a href="#步骤二：-i-amp-0x33333333-i-gt-gt-2-amp-0x33333333" class="headerlink" title="步骤二：(i &amp; 0x33333333) + ((i &gt;&gt; 2) &amp; 0x33333333)"></a>步骤二：(i &amp; 0x33333333) + ((i &gt;&gt; 2) &amp; 0x33333333)</h3><p><code>0x33333333</code> 的二进制表示为 <code>0011 0011 0011 0011 0011 0011 0011 0011</code></p><h4 id="i-amp-0x33333333"><a href="#i-amp-0x33333333" class="headerlink" title="i &amp; 0x33333333"></a>i &amp; 0x33333333</h4><p><code>i</code> 中每 4 个二进制数为一组，每组中 2 个低位数字保持不变，高位数字置 0。</p><h4 id="i-gt-gt-2"><a href="#i-gt-gt-2" class="headerlink" title="i &gt;&gt; 2"></a>i &gt;&gt; 2</h4><p><code>i</code> 右移动 2 位，丢弃 2 个低位，因此原先一组中的 2 个高位变成低位，2 个低位被右移到右侧分组的高位中。</p><h4 id="i-gt-gt-2-amp-0x33333333"><a href="#i-gt-gt-2-amp-0x33333333" class="headerlink" title="(i &gt;&gt; 2) &amp; 0x33333333"></a>(i &gt;&gt; 2) &amp; 0x33333333</h4><p>令 <code>i &gt;&gt; 2</code> 结果为 <code>x</code>，<code>x</code> 依旧被分为 4 个一组，每组中 2 个高位置 0，2 个低位保持不变。</p><h4 id="i-amp-0x33333333-i-gt-gt-2-amp-0x33333333"><a href="#i-amp-0x33333333-i-gt-gt-2-amp-0x33333333" class="headerlink" title="(i &amp; 0x33333333) + ((i &gt;&gt; 2) &amp; 0x33333333)"></a>(i &amp; 0x33333333) + ((i &gt;&gt; 2) &amp; 0x33333333)</h4><p><code>(i &amp; 0x33333333) + ((i &gt;&gt; 2) &amp; 0x33333333)</code> 中每 4 个二进制数被分为一组，各组的十进制表示就是该组的汉明重量。</p><hr><h3 id="步骤三：-i-amp-0x0F0F0F0F-i-gt-gt-4-amp-0x0F0F0F0F"><a href="#步骤三：-i-amp-0x0F0F0F0F-i-gt-gt-4-amp-0x0F0F0F0F" class="headerlink" title="步骤三：(i &amp; 0x0F0F0F0F) + ((i &gt;&gt; 4) &amp; 0x0F0F0F0F);"></a>步骤三：(i &amp; 0x0F0F0F0F) + ((i &gt;&gt; 4) &amp; 0x0F0F0F0F);</h3><p><code>0x0F0F0F0F</code> 的二进制表示为 <code>00001111 00001111 00001111 00001111</code>。同上述步骤可知，步骤三 <code>(i &amp; 0x0F0F0F0F) + ((i &gt;&gt; 4) &amp; 0x0F0F0F0F)</code> 将步骤二的结果按每八个二进制位为一组进行分组，各组的十进制表示就是该组的明汉重量。</p><hr><h3 id="步骤四：-i-0x01010101-gt-gt-24"><a href="#步骤四：-i-0x01010101-gt-gt-24" class="headerlink" title="步骤四：(i * (0x01010101) &gt;&gt; 24)"></a>步骤四：(i * (0x01010101) &gt;&gt; 24)</h3><p><code>0x01010101</code> 的二进制表示为 <code>00000001 00000001 00000001 00000001</code>。</p><h4 id="i-0x01010101"><a href="#i-0x01010101" class="headerlink" title="i * (0x01010101)"></a>i * (0x01010101)</h4><p><code>i</code> 已经被分为八个二进制位为一组的分组，假设分组分别为 A、B、C、D（长度为 32 位，所以有 4 个分组），现在我们要求总结果，就要把这 4 个分组的值（即汉明重量）进行相加。</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// 分组 A</span><br><span class="line">i + </span><br><span class="line">// 分组 B 左移 8 位</span><br><span class="line">(i &lt;&lt; 8) + </span><br><span class="line">// 分组 C 左移 16 位</span><br><span class="line">(i &lt;&lt; 16) + </span><br><span class="line">// 分组 D 左移 24 位</span><br><span class="line">(i &lt;&lt; 24)</span><br><span class="line">= i * (1 + 1 &lt;&lt; 8 + 1 &lt;&lt; 16 + 1 &lt;&lt; 24) </span><br><span class="line">= i * 0x01010101</span><br></pre></td></tr></table></figure><p>因此，<code>i * (0x01010101)</code> 表示：将 <code>i</code> 的汉明重量聚集在二进制的最高八位。</p><h4 id="i-0x01010101-gt-gt-24"><a href="#i-0x01010101-gt-gt-24" class="headerlink" title="i * (0x01010101) &gt;&gt; 24"></a>i * (0x01010101) &gt;&gt; 24</h4><p>将最高八位右移成为最低八位，从而求出最终结果。</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://zh.wikipedia.org/wiki/%E6%B1%89%E6%98%8E%E9%87%8D%E9%87%8F" target="_blank" rel="noopener">汉明重量</a></li><li><a href="https://ivanzz1001.github.io/records/post/data-structure/2018/09/04/ds-variable-precision-SWAR" target="_blank" rel="noopener">variable precision SWAR算法</a></li></ul>]]></content>
    
    <summary type="html">
    
      如何计算汉明重量？
    
    </summary>
    
      <category term="Web屠龙刀" scheme="http://jalan.space/categories/Web%E5%B1%A0%E9%BE%99%E5%88%80/"/>
    
    
      <category term="Redis" scheme="http://jalan.space/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>《Head First 设计模式》学习笔记 | 观察者模式</title>
    <link href="http://jalan.space/2020/03/30/2020/design-pattern-observer/"/>
    <id>http://jalan.space/2020/03/30/2020/design-pattern-observer/</id>
    <published>2020-03-30T14:40:00.000Z</published>
    <updated>2020-03-30T14:40:20.435Z</updated>
    
    <content type="html"><![CDATA[<p>往期回顾：</p><ul><li><a href="/2020/03/09/2020/design-pattern-strategy-pattern/">《Head First 设计模式》学习笔记 | 策略模式</a></li></ul><h2 id="设计气象观测站"><a href="#设计气象观测站" class="headerlink" title="设计气象观测站"></a>设计气象观测站</h2><p>以书中的气象监测应用为例：现在有一个气象中心可以监测温度、湿度、气压三种数据，我们需要通过 <code>WeatherData</code> 对象来获取这些数据，然后将这些数据显示在特定的装置上。</p><p><img src="https://user-gold-cdn.xitu.io/2020/3/29/1712533a92d605d0?w=978&amp;h=291&amp;f=png&amp;s=39407" alt=""></p><p><code>WeatherData</code> 拥有以下方法：</p><ul><li><code>getTemperature()</code>：获取温度数据</li><li><code>getHumidity()</code>： 获取湿度数据</li><li><code>getPressure()</code>：获取气压数据</li><li><code>measurementsChanged()</code>：一旦气象站更新数据，这个方法会被调用</li></ul><p>这样一看似乎十分简单：我们只要在 <code>measurementsChanged()</code> 中通过一系列 <code>getter</code> 获取到气象台提供的温度、湿度与气压数据，然后再调用显示装置的更新数据方法即可。</p><p>但是，如果我们后续需要增加或减少显示装置应该怎么办呢？每次都要修改 <code>measurementsChanged()</code> 显然不是个好办法。</p><h2 id="出版者与订阅者"><a href="#出版者与订阅者" class="headerlink" title="出版者与订阅者"></a>出版者与订阅者</h2><p>想想在现实生活中我们是怎么享受报纸订阅服务的？</p><ul><li>报社负责出版报纸，可以接受人们的订阅或取消订阅</li><li>如果我们向报社订阅了报纸，一旦有新报纸出版，报社就会送来新的报纸</li><li>如果我们不想看报纸了，就取消订阅，报社就不会再送新报纸上门</li></ul><p>气象站与显示装置之间其实也是这样的关系，气象站为「出版者」，显示装置为「订阅者」：<strong>需要获得气象站数据的显示装置可以向气象站申请「订阅」，这样一旦有气象数据更新，气象站就会通知申请订阅的显示装置；如果显示装置不再需要该气象站提供数据，则可以「取消订阅」，不再接受气象站的通知</strong>。</p><p>上述「出版者」称为「主题」（<em>Subject</em>），「订阅者」称为「观察者」（<em>Observer</em>），两者构成了观察者模式的主要部分。</p><h2 id="定义观察者模式"><a href="#定义观察者模式" class="headerlink" title="定义观察者模式"></a>定义观察者模式</h2><p>观察者模式定义如下：</p><blockquote><p>观察者模式定义了对象之间的一对多依赖，这样一来，当一个对象改变状态时，它的所有依赖者都会收到通知并且自动更新。</p></blockquote><p><img src="https://user-gold-cdn.xitu.io/2020/3/29/171257b0e5ae2438?w=673&amp;h=364&amp;f=png&amp;s=63287" alt="观察者模式类图"></p><p>类图中包含两个接口定义：</p><ul><li>主题接口 <code>Subject</code>：<ul><li><code>registerObserver()</code>：添加订阅者</li><li><code>removeObserver()</code>：移除订阅者</li><li><code>notifyObserver()</code>：通知订阅者</li></ul></li><li>观察者接口 <code>Observer</code>：<ul><li><code>update()</code>：在主题 <code>notifyObserver()</code> 中被调用，用于更新观察者的数据</li></ul></li></ul><h2 id="实现气象站"><a href="#实现气象站" class="headerlink" title="实现气象站"></a>实现气象站</h2><h3 id="设计类图"><a href="#设计类图" class="headerlink" title="设计类图"></a>设计类图</h3><p>根据上述观察者模式定义，我们先为气象站设计「主题」与「观察者」两个接口，除此之外也可以添加一个显示装置接口，专门负责显示装置的具体显示格式。</p><p>接口定义好后，就可以让具体的类来实现这些接口了：</p><ul><li><code>WeatherData</code> 作为具体主题，实现 <code>Subject</code> 主题接口</li><li>各个显示装置作为具体观察者，实现 <code>Observer</code> 观察者接口</li></ul><p><img src="https://user-gold-cdn.xitu.io/2020/3/29/1712587d2e56115e?w=911&amp;h=434&amp;f=png&amp;s=110929" alt="气象站类图"></p><h3 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h3><h4 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 主题接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Subject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">registerObserver</span><span class="params">($observer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">removeObserver</span><span class="params">($observer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">notifyObservers</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 观察者接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Observer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">($temp, $humidity, $pressure)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 显示装置显示接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">DisplayElement</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * WeatherData 实现主题接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeatherData</span> <span class="keyword">implements</span> <span class="title">Subject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// 观察者数组</span></span><br><span class="line">    <span class="keyword">private</span> $observers;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 温度</span></span><br><span class="line">    <span class="keyword">private</span> $temperature;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 湿度</span></span><br><span class="line">    <span class="keyword">private</span> $humidity;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 气压</span></span><br><span class="line">    <span class="keyword">private</span> $pressure;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;observers = [];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加入新的观察者</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">registerObserver</span><span class="params">($observer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;observers[] = $observer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 移除观察者</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">removeObserver</span><span class="params">($observer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $index = array_search($observer, <span class="keyword">$this</span>-&gt;observers);</span><br><span class="line">        <span class="keyword">unset</span>(<span class="keyword">$this</span>-&gt;observers[$index]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通知观察者</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">notifyObservers</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 遍历数组通知观察者</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;observers <span class="keyword">as</span> $observer) &#123;</span><br><span class="line">            $observer-&gt;update(<span class="keyword">$this</span>-&gt;temperature, <span class="keyword">$this</span>-&gt;humidity, <span class="keyword">$this</span>-&gt;pressure);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">measurementsChanged</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 通知订阅者</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;notifyObservers();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 气象站有新数据将调用该函数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setMeasurements</span><span class="params">($temperature, $humidity, $pressure)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;temperature = $temperature;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;humidity    = $humidity;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;pressure    = $pressure;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;measurementsChanged();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建显示装置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 显示装置 1: 只显示温度和湿度</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FirstDisplay</span> <span class="keyword">implements</span> <span class="title">Observer</span>, <span class="title">DisplayElement</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// 温度</span></span><br><span class="line">    <span class="keyword">private</span> $temperature;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 湿度</span></span><br><span class="line">    <span class="keyword">private</span> $humidity;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**<span class="doctag">@var</span> WeatherData $weatherData */</span></span><br><span class="line">    <span class="keyword">private</span> $weatherData;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($weatherData)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 创建一个 WeatherData 实例</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;weatherData = $weatherData;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;weatherData-&gt;registerObserver(<span class="keyword">$this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">($temperature, $humidity, $pressure)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;temperature = $temperature;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;humidity    = $humidity;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;display();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"当前温度：&#123;$this-&gt;temperature&#125;，当前湿度：&#123;$this-&gt;humidity&#125;\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 显示装置 2：只显示气压</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SecondDisplay</span> <span class="keyword">implements</span> <span class="title">Observer</span>, <span class="title">DisplayElement</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 气压</span></span><br><span class="line">    <span class="keyword">private</span> $pressure;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**<span class="doctag">@var</span> WeatherData $weatherData */</span></span><br><span class="line">    <span class="keyword">private</span> $weatherData;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($weatherData)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 创建一个 WeatherData 实例</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;weatherData = $weatherData;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;weatherData-&gt;registerObserver(<span class="keyword">$this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">($temperature, $humidity, $pressure)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;pressure = $pressure;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;display();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"当前气压：&#123;$this-&gt;pressure&#125;\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 显示装置 3（略）</span></span><br><span class="line"><span class="comment"> * class ThirdDisplay</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试调用</span></span><br><span class="line"><span class="comment">// 创建一个 WeatherData 对象</span></span><br><span class="line">$weatherData = <span class="keyword">new</span> WeatherData();</span><br><span class="line"><span class="comment">// 创建显示装置 1，传入 WeatherData 对象</span></span><br><span class="line">$firstDisplay = <span class="keyword">new</span> FirstDisplay($weatherData);</span><br><span class="line"><span class="comment">// 传入模拟气象数据</span></span><br><span class="line">$weatherData-&gt;setMeasurements(<span class="number">80</span>, <span class="number">70</span>, <span class="number">30.4</span>);</span><br><span class="line">$weatherData-&gt;setMeasurements(<span class="number">70</span>, <span class="number">60</span>, <span class="number">29.2</span>);</span><br><span class="line"><span class="comment">// 取消订阅</span></span><br><span class="line">$weatherData-&gt;removeObserver($firstDisplay);</span><br><span class="line"><span class="comment">// 创建显示装置 2，传入 WeatherData 对象</span></span><br><span class="line">$secondDisplay = <span class="keyword">new</span> SecondDisplay($weatherData);</span><br><span class="line">$weatherData-&gt;setMeasurements(<span class="number">90</span>, <span class="number">60</span>, <span class="number">29.2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">当前温度：80，当前湿度：70</span></span><br><span class="line"><span class="comment">当前温度：70，当前湿度：60</span></span><br><span class="line"><span class="comment">当前气压：29.2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        主题（出版者）</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self._observers = []</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">register</span><span class="params">(self, observer)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        添加观察者</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> observer <span class="keyword">not</span> <span class="keyword">in</span> self._observers:</span><br><span class="line">            self._observers.append(observer)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">remove</span><span class="params">(self, observer)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        移除观察者</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self._observers.remove(observer)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">notify</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        发送通知给所有观察者</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">for</span> observer <span class="keyword">in</span> self._observers:</span><br><span class="line">            observer.update()</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeatherData</span><span class="params">(Subject)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        Subject.__init__(self)</span><br><span class="line">        self._temperature = <span class="number">0</span> <span class="comment"># 温度</span></span><br><span class="line">        self._humidity = <span class="number">0</span> <span class="comment"># 湿度</span></span><br><span class="line">        self._pressure = <span class="number">0</span> <span class="comment"># 气压</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_measurements</span><span class="params">(self, temperature, humidity, pressure)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        气象数据发生变动时调用该函数</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self._temperature = temperature</span><br><span class="line">        self._humidity = humidity</span><br><span class="line">        self._pressure = pressure</span><br><span class="line">        self.notify()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">temperature</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._temperature</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">humidity</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._humidity</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pressure</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._pressure</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FirstDisplay</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, weatherData)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        显示装置 1：显示温度和湿度</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self._weather_data = weatherData</span><br><span class="line">        self._weather_data.register(self)</span><br><span class="line">        self._temperature = <span class="number">0</span></span><br><span class="line">        self._humidity = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        更新数据</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self._temperature = self._weather_data.temperature</span><br><span class="line">        self._humidity = self._weather_data.humidity</span><br><span class="line">        self.display()</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        显示数据</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        print(<span class="string">"当前温度：%s，当前湿度：%s"</span> % (self._temperature, self._humidity))</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SecondDisplay</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, weatherData)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        显示装置 2：显示气压</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self._weather_data = weatherData</span><br><span class="line">        self._weather_data.register(self)</span><br><span class="line">        self._pressure = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        更新数据</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self._pressure = self._weather_data.pressure</span><br><span class="line">        self.display()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"当前气压：%s"</span> % self._pressure)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 创建一个 WeatherData 对象</span></span><br><span class="line">    weather_data = WeatherData()</span><br><span class="line">    <span class="comment"># 创建显示装置 1</span></span><br><span class="line">    first_display = FirstDisplay(weather_data)</span><br><span class="line">    <span class="comment"># 传入模拟数据</span></span><br><span class="line">    weather_data.set_measurements(<span class="number">21</span>, <span class="number">50</span>, <span class="number">3</span>)</span><br><span class="line">    weather_data.set_measurements(<span class="number">3</span>, <span class="number">70</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="comment"># 移除</span></span><br><span class="line">    weather_data.remove(first_display)</span><br><span class="line">    <span class="comment"># 添加装置 2</span></span><br><span class="line">    second_display = SecondDisplay(weather_data)</span><br><span class="line">    weather_data.set_measurements(<span class="number">21</span>, <span class="number">50</span>, <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Output:</span></span><br><span class="line"><span class="string">当前温度：21，当前湿度：50</span></span><br><span class="line"><span class="string">当前温度：3，当前湿度：70</span></span><br><span class="line"><span class="string">当前气压：30</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure><h4 id="Golang"><a href="#Golang" class="headerlink" title="Golang"></a>Golang</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Subject 主题</span></span><br><span class="line"><span class="keyword">type</span> Subject <span class="keyword">interface</span> &#123;</span><br><span class="line">Register(observer Observer)</span><br><span class="line">Remove(obeserver Observer)</span><br><span class="line">Notify()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// WeatherData 具体主题</span></span><br><span class="line"><span class="keyword">type</span> WeatherData <span class="keyword">struct</span> &#123;</span><br><span class="line">observers   []Observer</span><br><span class="line">temperature <span class="keyword">int</span></span><br><span class="line">humidity    <span class="keyword">int</span></span><br><span class="line">pressure    <span class="keyword">float32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w *WeatherData)</span> <span class="title">Register</span><span class="params">(observer Observer)</span></span> &#123;</span><br><span class="line">w.observers = <span class="built_in">append</span>(w.observers, observer)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取消订阅</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w *WeatherData)</span> <span class="title">Remove</span><span class="params">(observer Observer)</span></span> &#123;</span><br><span class="line"><span class="comment">// 双指针法：找到需要取消订阅的对象并覆盖</span></span><br><span class="line">j := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _, ob := <span class="keyword">range</span> w.observers &#123;</span><br><span class="line"><span class="keyword">if</span> ob != observer &#123;</span><br><span class="line">w.observers[j] = observer</span><br><span class="line">j++</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">w.observers = w.observers[:j]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通知所有订阅者</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w *WeatherData)</span> <span class="title">Notify</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> _, observer := <span class="keyword">range</span> w.observers &#123;</span><br><span class="line">observer.update(w.temperature, w.humidity, w.pressure)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置新的数据</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w *WeatherData)</span> <span class="title">SetMeasurements</span><span class="params">(temperature <span class="keyword">int</span>, humidity <span class="keyword">int</span>, pressure <span class="keyword">float32</span>)</span></span> &#123;</span><br><span class="line">w.temperature = temperature</span><br><span class="line">w.humidity = humidity</span><br><span class="line">w.pressure = pressure</span><br><span class="line">w.Notify()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Observer 观察者</span></span><br><span class="line"><span class="keyword">type</span> Observer <span class="keyword">interface</span> &#123;</span><br><span class="line">update(temperature <span class="keyword">int</span>, humidity <span class="keyword">int</span>, pressure <span class="keyword">float32</span>)</span><br><span class="line">display()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// FirstDisplay 显示装置 1</span></span><br><span class="line"><span class="keyword">type</span> FirstDisplay <span class="keyword">struct</span> &#123;</span><br><span class="line">temperature <span class="keyword">int</span></span><br><span class="line">humidity    <span class="keyword">int</span></span><br><span class="line">pressure    <span class="keyword">float32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(display *FirstDisplay)</span> <span class="title">update</span><span class="params">(temperature <span class="keyword">int</span>, humidity <span class="keyword">int</span>, pressure <span class="keyword">float32</span>)</span></span> &#123;</span><br><span class="line">display.temperature = temperature</span><br><span class="line">display.humidity = humidity</span><br><span class="line">display.pressure = pressure</span><br><span class="line">display.display()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(display *FirstDisplay)</span> <span class="title">display</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"当前温度：%d， 当前湿度：%d\n"</span>, display.temperature, display.humidity)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// SecondDisplay 显示装置 2</span></span><br><span class="line"><span class="keyword">type</span> SecondDisplay <span class="keyword">struct</span> &#123;</span><br><span class="line">temperature <span class="keyword">int</span></span><br><span class="line">humidity    <span class="keyword">int</span></span><br><span class="line">pressure    <span class="keyword">float32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(display *SecondDisplay)</span> <span class="title">update</span><span class="params">(temperature <span class="keyword">int</span>, humidity <span class="keyword">int</span>, pressure <span class="keyword">float32</span>)</span></span> &#123;</span><br><span class="line">display.temperature = temperature</span><br><span class="line">display.humidity = humidity</span><br><span class="line">display.pressure = pressure</span><br><span class="line">display.display()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(display *SecondDisplay)</span> <span class="title">display</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"当前气压：%.2f\n"</span>, display.pressure)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">weatherData := WeatherData&#123;&#125;</span><br><span class="line"><span class="comment">// 创建显示装置 1</span></span><br><span class="line">firstDisplay := &amp;FirstDisplay&#123;&#125;</span><br><span class="line">weatherData.Register(firstDisplay)</span><br><span class="line">weatherData.SetMeasurements(<span class="number">23</span>, <span class="number">50</span>, <span class="number">23.1</span>)</span><br><span class="line"><span class="comment">// weatherData.Remove(firstDisplay)</span></span><br><span class="line"><span class="comment">// 创建显示装置 2</span></span><br><span class="line">secondDisplay := &amp;SecondDisplay&#123;&#125;</span><br><span class="line">weatherData.Register(secondDisplay)</span><br><span class="line">weatherData.SetMeasurements(<span class="number">22</span>, <span class="number">70</span>, <span class="number">24.2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>观察者模式定义了对象之间一对多的关系</li><li>主题通过一个共同的接口来更新观察者</li><li>主题和观察者之间用松耦合方式结合，主题不需要知道观察者的细节，具体观察者只需要实现观察者的接口</li></ul>]]></content>
    
    <summary type="html">
    
      松耦合的魅力
    
    </summary>
    
      <category term="技多不压身" scheme="http://jalan.space/categories/%E6%8A%80%E5%A4%9A%E4%B8%8D%E5%8E%8B%E8%BA%AB/"/>
    
    
      <category term="设计模式" scheme="http://jalan.space/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>《Head First 设计模式》学习笔记 | 策略模式</title>
    <link href="http://jalan.space/2020/03/09/2020/design-pattern-strategy-pattern/"/>
    <id>http://jalan.space/2020/03/09/2020/design-pattern-strategy-pattern/</id>
    <published>2020-03-09T14:15:00.000Z</published>
    <updated>2020-03-09T14:16:33.787Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我最近在看大名鼎鼎的《Head First 设计模式》。这本「OO 圣经」用 Java 实现各类设计模式，对于我 —— 一个非 Java 爱好者而言，读起来并不过瘾。</p><p>有人读完这本书可能会误解设计模式就是设计 Interface，而事实并非如此。在知乎的一个问题<a href="https://www.zhihu.com/question/20685467" target="_blank" rel="noopener">《Python 里没有接口，如何写设计模式？》</a>中，<a href="https://www.zhihu.com/people/excited-vczh/activities" target="_blank" rel="noopener">vczh</a> 轮子哥是这样回答的：</p><blockquote><p>设计模式搞了那么多东西就是在告诉你<strong>如何在各种情况下解耦你的代码，让你的代码在运行时可以互相组合</strong>。这就跟兵法一样。难道有了飞机大炮，兵法就没有用了吗？</p></blockquote><p>我觉得这个比喻很好，不同的语言就像不同的兵器，各有各的特点与使用方式，而设计模式就是那套「兵法」，无论你使用何种兵器，不过是「纵横不出方圆，万变不离其宗」。而只看书中一种「兵器」未免太少，不如我们多试几样？</p><p>本篇就来看一看第一章「兵法」 —— 策略模式（<em>Strategy Pattern</em>）。</p><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>书中对策略模式的定义如下：</p><blockquote><p>策略模式定义了算法族，分别封装起来，让它们之间可以互相替换，此模式让算法的变化独立于使用算法的客户。</p></blockquote><p>下面以书中的「模拟鸭子应用」为例。</p><h2 id="继承的弊端"><a href="#继承的弊端" class="headerlink" title="继承的弊端"></a>继承的弊端</h2><p>你要设计一个鸭子游戏，游戏里有各种各样的鸭子，它们会游泳（<code>swim()</code>），还会呱呱叫（<code>quack()</code>），每种鸭子拥有不同的外观（<code>display()</code>）。</p><p>一开始，你可能会设计一个鸭子的超类 <code>Duck</code>，然后让所有不同种类的鸭子继承它：</p><p><img src="https://user-gold-cdn.xitu.io/2020/1/11/16f93ce4aecf95a9?w=928&amp;h=575&amp;f=png&amp;s=44162" alt="设计一个鸭子超类（Superclass）"></p><p>如果此时我们想让鸭子飞起来，就要在超类中增加一个 <code>fly()</code> 方法：</p><p><img src="https://user-gold-cdn.xitu.io/2020/1/11/16f93d4fe2ad11e4?w=928&amp;h=575&amp;f=png&amp;s=51352" alt="让鸭子飞"></p><p>此时，鸭子家族来了一只擅于代码调试工作的小黄鸭。</p><p><img src="https://user-gold-cdn.xitu.io/2020/1/11/16f93d78bf4775e3?w=720&amp;h=480&amp;f=jpeg&amp;s=4512" alt=""></p><p>此时，一切都乱套了，这位代码调试工作者会发出「吱吱」的叫声，但却不会飞，然而它却从鸭子超类继承了 <code>quack()</code> 和 <code>fly()</code> 方法。为了让它尊重客观事实，我们需要在小黄鸭类中覆盖超类的 <code>quack()</code> 和 <code>fly()</code> 方法，让它变得不会叫也不会飞。</p><p><img src="https://user-gold-cdn.xitu.io/2020/1/11/16f93e06edacc785?w=897&amp;h=660&amp;f=png&amp;s=69744" alt="在小黄鸭中覆盖原有的方法"></p><p>虽然我们用「覆盖方法」的手段解决了小黄鸭的问题，但未来我们可能还会制造更多奇奇怪怪的鸭子。例如周黑鸭或北京烤鸭，它们显然既不会叫，也不会游泳，还不会飞，这时我们又要为它们重写所有的行为吗？利用继承的方式来为不同种类的鸭子提供行为显然不够灵活。</p><h2 id="抽离可变行为"><a href="#抽离可变行为" class="headerlink" title="抽离可变行为"></a>抽离可变行为</h2><p>不同的鸭子具有不同的行为，<strong>鸭子的行为应当是灵活可变的</strong>。</p><blockquote><p><strong>设计原则一</strong>：找出应用中可能需要变化之处，把它们独立出来，不要和那些不需要变化的代码混在一起。</p></blockquote><p>因此，利用上述原则，我们把「鸭子的行为」从鸭子类（<em>Duck</em>）中抽离出来。</p><p><img src="https://user-gold-cdn.xitu.io/2020/1/11/16f94127e9058e99?w=727&amp;h=480&amp;f=png&amp;s=43051" alt="取出容易变化的行为"></p><h2 id="实现被抽离的行为"><a href="#实现被抽离的行为" class="headerlink" title="实现被抽离的行为"></a>实现被抽离的行为</h2><blockquote><p><strong>设计原则二</strong>：针对接口编程，而不是针对实现编程。</p></blockquote><p>我们将这些被抽离出的行为归类：</p><ul><li>所有具体的飞行行为属于飞行策略</li><li>所有具体的叫声行为属于叫声策略</li><li>所有具体的游泳行为属于游泳策略</li><li>……</li></ul><p>我们可以利用接口或抽象类代表这些<strong>策略</strong>，然后<strong>让特定的具体行为来实现这些策略中的方法</strong>。</p><p>例如，我们的飞行策略名为 <code>FlyBehavior</code>，我们将它设计为一个抽象类（当然也可以是接口）。然后，我们有两种具体的飞行方式 <code>FlyWithWings</code>（会飞）和 <code>FlyNoWay</code>（不会飞），它们需要实现飞行策略中的 <code>fly()</code> 方法：</p><p><img src="https://user-gold-cdn.xitu.io/2020/1/11/16f943b6cc1ece6c?w=640&amp;h=407&amp;f=png&amp;s=22118" alt=""></p><h2 id="整合"><a href="#整合" class="headerlink" title="整合"></a>整合</h2><p>此时，我们已经将可变的行为从鸭子超类（<code>Duck</code>）中抽离，并把它们用具体的「行为类」进行表示。我们希望：<strong>如果鸭子要执行某个行为，它不需要自己处理，而是将这一行为委托给具体的「行为类」</strong>。</p><p>因此，我们可以在鸭子超类（<code>Duck</code>）中加入「行为类」的实例变量，从而通过这些实例变量来调用具体的行为方法。</p><p><img src="https://user-gold-cdn.xitu.io/2020/1/11/16f9446b3dde8d5b?w=707&amp;h=294&amp;f=png&amp;s=22524" alt=""></p><p>在 <code>Class Duck</code> 的 <code>fly()</code> 方法中，我们可以使用实例 <code>flyBehavior</code> 调用具体的行为方法，从而达成「委托」的目的：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fly</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;flyBehavior-&gt;fly();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><p>下面来看看不同语言的具体实现：</p><h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><p>PHP 有抽象类也有接口，语法和 Java 比较接近。实现方法中规中矩，和书中的并无二致。只不过这里我把行为接口改成了抽象类。类图如下：</p><p><img src="https://user-gold-cdn.xitu.io/2020/1/11/16f9495446251c43?w=1628&amp;h=758&amp;f=png&amp;s=103391" alt="UML 类图关系"></p><p>具体实现：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 飞行行为类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">FlyBehavior</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fly</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 「飞」的具体行为</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlyWithWings</span> <span class="keyword">extends</span> <span class="title">FlyBehavior</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fly</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"会飞\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlyNoWay</span> <span class="keyword">extends</span> <span class="title">FlyBehavior</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fly</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"不会飞\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 叫声行为类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">QuackBehavior</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">quack</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 「叫」的具体行为</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Quack</span> <span class="keyword">extends</span> <span class="title">QuackBehavior</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">quack</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"呱呱\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Squeak</span> <span class="keyword">extends</span> <span class="title">QuackBehavior</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">quack</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"吱吱\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MuteQuack</span> <span class="keyword">extends</span> <span class="title">QuackBehavior</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">quack</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"不会叫\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 鸭子类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Duck</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $flyStrategy;</span><br><span class="line">    <span class="keyword">protected</span> $quackStrategy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fly</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;flyStrategy-&gt;fly();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">quack</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;quackStrategy-&gt;quack();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 有只小黄鸭</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">YellowDuck</span> <span class="keyword">extends</span> <span class="title">Duck</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($flyStrategy, $quackStrategy)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;flyStrategy = $flyStrategy;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;quackStrategy = $quackStrategy;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$yellowDuck = <span class="keyword">new</span> YellowDuck(<span class="keyword">new</span> FlyNoWay(), <span class="keyword">new</span> Squeak());</span><br><span class="line">$yellowDuck-&gt;fly();</span><br><span class="line">$yellowDuck-&gt;quack();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">不会飞</span></span><br><span class="line"><span class="comment">吱吱</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><p>Python 就没有所谓的抽象类和接口了，当然你也可以通过 <code>abc</code> 模块来实现这些功能。</p><p>比较简单的做法是：将具体行为直接定义为函数，在初始化鸭子时通过构造函数传入行为函数，赋值给对应的变量。当执行具体行为时，将直接调用被赋值的变量，这时具体的行为动作就被委托给了传入的行为函数，达到了「委托」的效果。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Duck</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, fly_strategy, quack_strategy)</span>:</span></span><br><span class="line">        self.fly_strategy = fly_strategy</span><br><span class="line">        self.quack_strategy = quack_strategy</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.fly_strategy()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">quack</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.quack_strategy()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fly_with_wings</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"会飞"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fly_no_way</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"不会飞"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quack</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"呱呱"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">squeak</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"吱吱"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mute_quack</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"不会叫"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一只会飞也不会叫的小黄鸭</span></span><br><span class="line">yellow_duck = Duck(fly_no_way, mute_quack)</span><br><span class="line">yellow_duck.fly()</span><br><span class="line">yellow_duck.quack()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Output:</span></span><br><span class="line"><span class="comment"># 不会飞</span></span><br><span class="line"><span class="comment"># 不会叫</span></span><br></pre></td></tr></table></figure><h3 id="Golang"><a href="#Golang" class="headerlink" title="Golang"></a>Golang</h3><p>在 Go 语言中没有 <code>extends</code> 关键字，但可以通过<strong>在结构体中内嵌匿名类型</strong>的方式实现继承关系。此处，将 <code>FlyBehavior</code> 飞行行为和 <code>QuackBehavior</code> 行为声明为接口。</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// FlyBehavior 飞行行为接口</span></span><br><span class="line"><span class="keyword">type</span> FlyBehavior <span class="keyword">interface</span> &#123;</span><br><span class="line">fly()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// QuackBehavior 呱呱叫行为接口</span></span><br><span class="line"><span class="keyword">type</span> QuackBehavior <span class="keyword">interface</span> &#123;</span><br><span class="line">quack()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// FlyWithWings 会飞的类</span></span><br><span class="line"><span class="keyword">type</span> FlyWithWings <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(flyWithWings FlyWithWings)</span> <span class="title">fly</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"会飞"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// FlyWithWings 不会飞的类</span></span><br><span class="line"><span class="keyword">type</span> FlyNoWay <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(flyNoWay FlyNoWay)</span> <span class="title">fly</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"不会飞"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Quack 呱呱叫</span></span><br><span class="line"><span class="keyword">type</span> Quack <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(quack Quack)</span> <span class="title">quack</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"呱呱"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Squeak 吱吱叫</span></span><br><span class="line"><span class="keyword">type</span> Squeak <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(squeak Squeak)</span> <span class="title">quack</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"吱吱"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MuteQuack 不会叫</span></span><br><span class="line"><span class="keyword">type</span> MuteQuack <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(muteQuack MuteQuack)</span> <span class="title">quack</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"不会叫"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Duck 鸭子类</span></span><br><span class="line"><span class="keyword">type</span> Duck <span class="keyword">struct</span> &#123;</span><br><span class="line">FlyBehavior   FlyBehavior</span><br><span class="line">QuackBehavior QuackBehavior</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *Duck)</span> <span class="title">fly</span><span class="params">()</span></span> &#123;</span><br><span class="line">d.FlyBehavior.fly() <span class="comment">// 委托给飞行行为</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *Duck)</span> <span class="title">quack</span><span class="params">()</span></span> &#123;</span><br><span class="line">d.QuackBehavior.quack() <span class="comment">// 委托给呱呱叫行为</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">yellowDuck := Duck&#123;FlyNoWay&#123;&#125;, Squeak&#123;&#125;&#125;</span><br><span class="line">yellowDuck.fly()</span><br><span class="line">yellowDuck.quack()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">不会飞</span></span><br><span class="line"><span class="comment">吱吱</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>三种设计原则：</p><ol><li>封装变化</li><li>多用组合，少用继承</li><li>针对接口编程，不针对实现编程</li></ol><p>注意此处的「针对接口编程」，书中也有强调：</p><blockquote><p>「针对接口编程」真正的意思是「针对超类型（supertype）编程」。这里所谓的「接口」有多个含义，接口是一个「概念」，也是一种 Java 的 interface 构造。你可以在不涉及 Java interface 的情况下「针对接口编程」，关键就在<strong>多态</strong>。利用多态，程序可以针对超类型编程，执行时会根据实际状况执行到真正的行为。</p></blockquote><p>因此，你不用拘泥于 <code>interface</code>，你所用的语言就算没有 <code>interface</code> 也能实现设计模式。</p>]]></content>
    
    <summary type="html">
    
      在策略模式（Strategy Pattern）中，一个类的行为或其算法可以在运行时更改。
    
    </summary>
    
      <category term="技多不压身" scheme="http://jalan.space/categories/%E6%8A%80%E5%A4%9A%E4%B8%8D%E5%8E%8B%E8%BA%AB/"/>
    
    
      <category term="设计模式" scheme="http://jalan.space/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>macOS 下 MongoDB 连接报错排查过程及处理</title>
    <link href="http://jalan.space/2020/01/31/2020/macos-mongodb-start-error/"/>
    <id>http://jalan.space/2020/01/31/2020/macos-mongodb-start-error/</id>
    <published>2020-01-31T12:37:00.000Z</published>
    <updated>2020-01-31T13:14:27.412Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>在 macOS 下使用 <a href="https://brew.sh/" target="_blank" rel="noopener">Homebrew</a> 安装 MongoDB。但在 Homebrew 的核心库中，我们无法找到 MongoDB，于是需要先运行 <code>brew tap</code>，帮助我们扩大可安装软件的选择范围。</p><blockquote><p>The tap command allows Homebrew to tap into another repository of formulae. Once you’ve done this you’ve expanded your options of installable software.</p></blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ brew tap mongodb/brew</span><br></pre></td></tr></table></figure><p>之后，运行如下命令安装 MongoDB：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ brew install mongodb-community@4.2</span><br></pre></td></tr></table></figure><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p>使用 <code>brew</code> 命令运行 MongoDB：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ brew services start mongodb-community@4.2</span><br></pre></td></tr></table></figure><h2 id="建立连接"><a href="#建立连接" class="headerlink" title="建立连接"></a>建立连接</h2><p>启动成功后，使用如下命令与 MongoDB 建立连接：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ mongo</span><br></pre></td></tr></table></figure><p>运行命令后发现连接失败，错误如下：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">MongoDB shell version v4.2.2</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb</span><br><span class="line">2020-01-31T19:24:23.752+0800 E  QUERY    [js] Error: couldn&apos;t connect to server 127.0.0.1:27017, connection attempt failed: SocketException: Error connecting to 127.0.0.1:27017 :: caused by :: Connection refused :</span><br><span class="line">connect@src/mongo/shell/mongo.js:341:17</span><br><span class="line">@(connect):2:6</span><br><span class="line">2020-01-31T19:24:23.768+0800 F  -        [main] exception: connect failed</span><br><span class="line">2020-01-31T19:24:23.768+0800 E  -        [main] exiting with code 1</span><br></pre></td></tr></table></figure><h3 id="报错排查"><a href="#报错排查" class="headerlink" title="报错排查"></a>报错排查</h3><p>看报错信息总之就是连接失败了，这么一大段除了 <code>Error connecting</code> 也没啥有用的信息了。为了获取<strong>具体</strong>的错误信息，我们可以查看 MongoDB 的日志文件，日志在 <em>/usr/local/var/log/mongodb</em> 目录中，日志信息如下：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cat /usr/local/var/log/mongodb/mongo.log</span><br><span class="line">2020-01-31T20:20:11.840+0800 I  CONTROL  [main] Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols &apos;none&apos;</span><br><span class="line">2020-01-31T20:20:11.875+0800 I  CONTROL  [initandlisten] MongoDB starting : pid=44665 port=27017 dbpath=/usr/local/var/mongodb 64-bit host=Jalan-JiangdeMacBook-Pro.local</span><br><span class="line">2020-01-31T20:20:11.875+0800 I  CONTROL  [initandlisten] db version v4.2.2</span><br><span class="line">2020-01-31T20:20:11.875+0800 I  CONTROL  [initandlisten] git version: a0bbbff6ada159e19298d37946ac8dc4b497eadf</span><br><span class="line">2020-01-31T20:20:11.875+0800 I  CONTROL  [initandlisten] allocator: system</span><br><span class="line">2020-01-31T20:20:11.875+0800 I  CONTROL  [initandlisten] modules: none</span><br><span class="line">2020-01-31T20:20:11.875+0800 I  CONTROL  [initandlisten] build environment:</span><br><span class="line">2020-01-31T20:20:11.875+0800 I  CONTROL  [initandlisten]     distarch: x86_64</span><br><span class="line">2020-01-31T20:20:11.875+0800 I  CONTROL  [initandlisten]     target_arch: x86_64</span><br><span class="line">2020-01-31T20:20:11.875+0800 I  CONTROL  [initandlisten] options: &#123; config: &quot;/usr/local/etc/mongod.conf&quot;, net: &#123; bindIp: &quot;127.0.0.1&quot; &#125;, storage: &#123; dbPath: &quot;/usr/local/var/mongodb&quot; &#125;, systemLog: &#123; destination: &quot;file&quot;, logAppend: true, path: &quot;/usr/local/var/log/mongodb/mongo.log&quot; &#125; &#125;</span><br><span class="line">2020-01-31T20:20:11.876+0800 I  STORAGE  [initandlisten]</span><br><span class="line">2020-01-31T20:20:11.877+0800 I  STORAGE  [initandlisten] ** WARNING: Support for MMAPV1 storage engine has been deprecated and will be</span><br><span class="line">2020-01-31T20:20:11.877+0800 I  STORAGE  [initandlisten] **          removed in version 4.2. Please plan to migrate to the wiredTiger</span><br><span class="line">2020-01-31T20:20:11.877+0800 I  STORAGE  [initandlisten] **          storage engine.</span><br><span class="line">2020-01-31T20:20:11.877+0800 I  STORAGE  [initandlisten] **          See http://dochub.mongodb.org/core/deprecated-mmapv1</span><br><span class="line">2020-01-31T20:20:11.877+0800 I  STORAGE  [initandlisten]</span><br><span class="line">2020-01-31T20:20:11.877+0800 I  STORAGE  [initandlisten] Detected data files in /usr/local/var/mongodb created by the &apos;mmapv1&apos; storage engine, so setting the active storage engine to &apos;mmapv1&apos;.</span><br><span class="line">2020-01-31T20:20:11.878+0800 I  STORAGE  [initandlisten] exception in initAndListen: Location18656: Cannot start server with an unknown storage engine: mmapv1, terminating</span><br><span class="line">2020-01-31T20:20:11.878+0800 I  NETWORK  [initandlisten] shutdown: going to close listening sockets...</span><br><span class="line">2020-01-31T20:20:11.878+0800 I  NETWORK  [initandlisten] removing socket file: /tmp/mongodb-27017.sock</span><br><span class="line">2020-01-31T20:20:11.878+0800 I  -        [initandlisten] Stopping further Flow Control ticket acquisitions.</span><br><span class="line">2020-01-31T20:20:11.879+0800 I  CONTROL  [initandlisten] now exiting</span><br><span class="line">2020-01-31T20:20:11.879+0800 I  CONTROL  [initandlisten] shutting down with code:100</span><br></pre></td></tr></table></figure><p>列出关键信息：<em>WARNING: Support for MMAPV1 storage engine has been deprecated and will be removed in version 4.2. Please plan to migrate to the wiredTiger</em></p><p>翻译一下就是：<strong>4.2 版本已不再支持 MMAPV1 引擎，请迁移至 wiredTiger 引擎</strong>。</p><p>在 <a href="https://docs.mongodb.com/manual/release-notes/4.0-compatibility/#deprecate-mmapv1" target="_blank" rel="noopener">Compatibility Changes in MongoDB 4.0</a> 中我们可以看到，MongoDB 从 4.0 版本开始就不再支持 MMAPV1 引擎了（<em>Deprecate MMAPv1</em>），因此，我们需要把引擎切换成 wiredTiger。</p><h3 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h3><p>首先，启动要切换引擎的 MongoDB：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ brew services start mongodb-community@4.2</span><br></pre></td></tr></table></figure><p>如果这个数据库中还有你所需要的数据，需要使用 <code>mongodump</code> 对数据库进行备份。</p><p>然后，创建一个新的目录，用于 wiredTiger 引擎的数据存储。我创建的目录为：<em>/usr/local/varmongodb-w</em>。</p><p>最后，使用 wiredTiger 引擎启动 MongoDB：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ mongod --storageEngine wiredTiger --dbpath /usr/local/varmongodb-w</span><br></pre></td></tr></table></figure><p>其中，<code>--dbpath</code> 后填写你刚才创建的新目录。</p><p>如果你刚才备份过数据，还需要使用 <code>mongorestore</code> 将数据重新导入。</p><p>大功告成啦~</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/" target="_blank" rel="noopener">Install MongoDB Community Edition on macOS</a></li><li><a href="https://docs.mongodb.com/manual/release-notes/4.0-compatibility/" target="_blank" rel="noopener">Compatibility Changes in MongoDB 4.0</a></li></ul>]]></content>
    
    <summary type="html">
    
      切换引擎至 WiredTiger
    
    </summary>
    
      <category term="跨过这道坎" scheme="http://jalan.space/categories/%E8%B7%A8%E8%BF%87%E8%BF%99%E9%81%93%E5%9D%8E/"/>
    
    
      <category term="mongodb" scheme="http://jalan.space/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>2019，冒险者的孤勇</title>
    <link href="http://jalan.space/2020/01/02/2020/2019-bye/"/>
    <id>http://jalan.space/2020/01/02/2020/2019-bye/</id>
    <published>2020-01-02T12:37:00.000Z</published>
    <updated>2020-01-25T14:34:00.852Z</updated>
    
    <content type="html"><![CDATA[<p>半个月前，我参加<a href="https://juejin.im/post/5def04e06fb9a01631780bec" target="_blank" rel="noopener">掘金年度征文</a>，写了一篇<a href="https://juejin.im/post/5df70c6cf265da33bd497c22" target="_blank" rel="noopener">《2019 年「我与技术那些事儿」| 掘金年度征文》</a>。这篇文章基本是我 2019 年在技术上的总结了。</p><p>但技术永远都只是生活的一部分。我不想在公众平台上写太多私人的事，所以还是按照以往的惯例，在博客上发一篇真正的、全面的 2019 年度总结。</p><p>2019 年 12 月的前半月我忙着发烧，后半月忙着制作 <a href="https://juejin.im/post/5e0aaa11e51d4575e942f14f" target="_blank" rel="noopener">GitHub 年度报告</a>，所以这篇「真正的总结」也只好放到 2020 年来写。</p><p>技术方面我就不再赘述了，如果你对我的技术总结感兴趣，欢迎戳上面的掘金链接。</p><p><img src="/img/in-post/2020/2019-bye/work.jpeg" alt="2019 年，在深圳"></p><h2 id="冒险"><a href="#冒险" class="headerlink" title="冒险"></a>冒险</h2><p>我给这篇年度总结起名《2019，冒险者的孤勇》，因为 2019 年对我而言就是冒险、承担、执拗。</p><p>年初冒险的决定改变了我的工作和生活，但我并没有因此而过得多好，反而时常为此流泪叹息。我一直很焦虑，时常自责。直到有一次，我的心理咨询师对我说：「你年初的决定很好地保护了你自己」。从此往后，我开始用这句话不段地自我鼓励：<strong>虽然我做得还不够好，但这个决定我从来没有做错过。就算没有人帮助我，我也可以保护好自己。</strong></p><p>「往者不可谏，来者犹可追」，这段冒险一旦开始就没有办法回头了。我在这条路上「又勇又怂」：勇在开疆扩土，怂在本性难移。「怂」的部分总是很难改变，但愿 2020 勇字当头，能活得更自在、更热忱些。</p><p><img src="/img/in-post/2020/2019-bye/shenzhen.jpeg" alt="2019 年 10 月，摄于福州南站"></p><h2 id="尝鲜"><a href="#尝鲜" class="headerlink" title="尝鲜"></a>尝鲜</h2><p>2019 年是「尝鲜」的一年，我经历了很多「人生第一次」：</p><ul><li>第一次裸辞</li><li>第一次「下岗」待业</li><li>第一次在深圳生活</li><li>第一次骑车上下班</li><li>第一次会网友</li><li>第一次心理咨询</li><li>第一次围观<a href="http://www.spartanrace.cn/zh/race/race-types/race-types-overview" target="_blank" rel="noopener">斯巴达勇士竞速赛</a></li><li>第一次自己坐飞机（还坐了 4 次）</li><li>第一次参加开发者大会（见<a href="http://jalan.space/2019/09/12/2019/google-developer-days/">《2019 谷歌开发者大会之我见》</a>）</li><li>第一次参与 GitHub 上的开源项目（<a href="https://github.com/xitu/gold-miner" target="_blank" rel="noopener">掘金翻译计划</a>，<a href="https://github.com/PHPMailer/PHPMailer" target="_blank" rel="noopener">PHPMailer</a>，<a href="https://github.com/jackfrued/Python-100-Days" target="_blank" rel="noopener">Python-100-Days</a>）</li><li>第一次开发 iOS 应用</li><li>第一次维护自己的开源项目（<a href="https://github.com/JalanJiang/leetcode-notebook" target="_blank" rel="noopener">leetcode-notebook</a>）</li><li>第一次创建技术群组（<a href="https://github.com/leetcode-notebook" target="_blank" rel="noopener">刷题小组</a>），认识了很多志同道合的小伙伴</li><li>第一次运营微信公众号，因此结识了非常多的大佬</li><li>……</li></ul><p><img src="/img/in-post/2020/2019-bye/spartanrace.jpeg" alt="斯巴达勇士竞速赛观光团"></p><h2 id="行路"><a href="#行路" class="headerlink" title="行路"></a>行路</h2><p>2019 年我去了香港、潮汕、上海、广州、顺德和南浔。原本在下半年有出国的计划，但很遗憾，最终没有达成。</p><p><img src="/img/in-post/2020/2019-bye/nan-xun.jpeg" alt="2019 年 11 月，摄于南浔古镇"></p><p>2020 年依旧想去一些从未到达的城市，看看别人的生活。</p><h2 id="反思"><a href="#反思" class="headerlink" title="反思"></a>反思</h2><p>我在 2019 年悟出的一个道理是：<strong>凡事急不得</strong>。</p><p>我经常遇见想做的事就开始挖坑，却往往三分钟热度，最终都没能把坑填上，导致事后自责懊恼，自信心受挫。我总是着急着想做成一些事，却忘记了很多事是着急不得的。专心做一件事时，其实就不能专心做另一件事，要用沉浸的心态把一件事做好，才能最终尝到「延迟满足」的滋味。</p><p>很感谢 2019 年最后一天我完成了 <a href="https://github.com/JalanJiang/2019-github-annual-report" target="_blank" rel="noopener">GitHub 年度报告</a>，这不是什么大项目，但在完成的过程中我经历了热情、懈怠、疲倦、放弃、重拾、收获几个过程，可谓是跌宕起伏了。这个项目让我尝到了甜头，让我在回顾 2019 时对自己有了更多的自信，也让我学会了如何调整心态，让自己更积极地面对生活中的「困倦期」。</p><p>2019 年的最后一个月我病了很久，一次病毒性感冒让我在两周中反复发烧，三进医院，直到今天我还在咳嗽，这个病依旧没有好全。2020 年我会把身体管理放在首要位置，未来还很长，不能在年轻时就把革命的本钱提前消耗殆尽。</p><h2 id="感恩"><a href="#感恩" class="headerlink" title="感恩"></a>感恩</h2><p>2019 年来到深圳后结识了很多新朋友，其中不乏许多大佬和有趣的人。</p><p>非常感谢遇到了现在的神仙舍友，在生活上对我照顾颇多。</p><p><img src="/img/in-post/2020/2019-bye/birthday.jpeg" alt="舍友下厨为我庆生"></p><p>年初离开厦门后，我在年底顺利地和<a href="http://gagalee.ink/" target="_blank" rel="noopener">佳爷</a>、<a href="https://csming1995.github.io/" target="_blank" rel="noopener">少棉</a>又见上面。除此之外，今年也顺利地和王总、应总实现了「一年一聚」之约。</p><p>感谢所有的朋友 2019 年听我吐了一年的苦水，感恩一直有你们鼓励我、督促我、陪着我。祝所有朋友 2020 年能一切顺利，未来都过上自己想要的生活。</p><p><img src="/img/in-post/2020/2019-bye/nan-xun-01.jpeg" alt="劝君更尽一杯酒"></p><p>最后的最后，也感谢自己从未放弃过自己。</p><h2 id="拔剑吧，2020"><a href="#拔剑吧，2020" class="headerlink" title="拔剑吧，2020"></a>拔剑吧，2020</h2><p>跨年是一件颇具仪式感的事。</p><p>2019 年的最后一天，我和<a href="http://csming1995.github.io/" target="_blank" rel="noopener">少棉</a>在深圳一起度过了告别 20 世纪 10 年代的跨年夜。这是我们在深圳的第一次跨年，在深圳湾吹着海风，听着一群陌生人喊着倒计时的数字。深圳湾没有烟花表演，黑漆漆一片，在人才公园的入口亦看不见繁华的香港。但在零点到来的时刻，听着陌生人大喊着「新年快乐」，迎接 2020 的一霎那有种莫名的幸福。</p><p>少棉曾经对我说「我们终于活下来了」，我把这句话写到了跨年的朋友圈文案里，还写了一句「我们有一万个去冒险的梦想，2019 年终于实现了一个」。</p><p>2019 年真的太难了，但我们也曾在 2019 年感慨「2018 年太难」，似乎进入成年人的世界后就再没有舒坦的日子。</p><p>但那又如何？2019 死里逃生，还怕些什么呢？</p><p><strong>拔剑吧 2020，我怕你个球</strong>。</p>]]></content>
    
    <summary type="html">
    
      拔剑吧，2020
    
    </summary>
    
      <category term="少年人的冲动" scheme="http://jalan.space/categories/%E5%B0%91%E5%B9%B4%E4%BA%BA%E7%9A%84%E5%86%B2%E5%8A%A8/"/>
    
    
      <category term="生活啊" scheme="http://jalan.space/tags/%E7%94%9F%E6%B4%BB%E5%95%8A/"/>
    
  </entry>
  
  <entry>
    <title>手摸手制作一份 2019 年 GitHub 年度报告</title>
    <link href="http://jalan.space/2019/12/31/2019/2019-github-annual-report/"/>
    <id>http://jalan.space/2019/12/31/2019/2019-github-annual-report/</id>
    <published>2019-12-31T12:28:00.000Z</published>
    <updated>2020-01-02T12:35:16.944Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我们即将与 2019 挥手作别，踏入崭新的 2020。一到年末，各个平台都在整理数据，出具一份属于自己平台的「年度报告」。而对于技术人而言，如果你是一位开源爱好者，GitHub 的年度报告就是你 2019 年的技术总结。</p><p>阮一峰老师曾在<a href="https://www.ruanyifeng.com/blog/2019/09/weekly-issue-73.html" target="_blank" rel="noopener">科技爱好者周刊</a>中提到「数据的力量」：</p><blockquote><p>GitHub 个人页有一个日历栏目，只要当天有代码提交，那一天的小方格就会变成绿色。如果这一年，你每天编码，日历就全是绿的，否则就会有白色的小方块。所有人都可以看到这个「编码日历」。很多人为了让绿色小方格子不要中断，就会尽量每天提交代码。时间一长，真的多做了不少项目。</p></blockquote><p>因此，这次年度报告我想主要针对这份「编码日历」，把你的「编码日历」组装到一张图片上展示给别人。</p><p>因为前一段时间正好在学习 <a href="https://graphql.cn/" target="_blank" rel="noopener">GraphQL</a>，所以将通过 GitHub 的接口 <a href="https://developer.github.com/v4/" target="_blank" rel="noopener">GitHub GraphQL API v4</a> 来获取相关的用户数据。</p><p>这份年度报告涉及到的主要技术：</p><ul><li>GraphQL</li><li>Python<ul><li><a href="https://2.python-requests.org//zh_CN/latest/user/quickstart.html" target="_blank" rel="noopener">requests</a>（发起请求）</li><li><a href="https://github.com/python-pillow/Pillow" target="_blank" rel="noopener">PIL</a>: Image/ImageDraw/ImageFont（图片处理）</li><li><a href="https://github.com/offu/WeRoBot" target="_blank" rel="noopener">werobot</a>（接入微信公众号）</li></ul></li></ul><h2 id="需求确立"><a href="#需求确立" class="headerlink" title="需求确立"></a>需求确立</h2><p>在开始 Coding 之前需要先梳理一下需求。生成报告的整个流程大致如下：</p><p><img src="/img/in-post/2019-github-annual-report/flow.png" alt="项目流程图"></p><p>因此，需要做的事包括：</p><ol><li>调通 GitHub GraphQL API v4，获取到需要的数据</li><li>对数据进行统计整理</li><li>设计一份年度报告</li><li>结合整理后的数据生成报告，并将最终报告返回给用户</li><li>接入微信公众平台，走通整个流程</li></ol><h2 id="数据获取"><a href="#数据获取" class="headerlink" title="数据获取"></a>数据获取</h2><h3 id="何为-GraphQL？"><a href="#何为-GraphQL？" class="headerlink" title="何为 GraphQL？"></a>何为 GraphQL？</h3><p>因为要通过 GitHub GraphQL API v4 获取数据，所以先来聊聊 GraphQL。</p><p>官方对于 GraphQL 的定义是：</p><blockquote><p>一种用于 API 的查询语言，是一个使用基于类型系统来执行查询的服务端运行时（类型系统由你的数据定义）。</p></blockquote><p>这样说很抽象，大家可能对 <a href="https://www.ruanyifeng.com/blog/2011/09/restful.html" target="_blank" rel="noopener">RESTful</a> 比较熟悉些，那么我们就拿 <a href="">GitHub REST API v3</a> 与 GitHub GraphQL API v4 获取数据的方式做一个简单的对比，GraphQL 的特点自然就一目了然。</p><p>以获取用户数据为例，相关接口文档：</p><ul><li>REST API v3: Users：<a href="https://developer.github.com/v3/users/" target="_blank" rel="noopener">https://developer.github.com/v3/users/</a></li><li>GraphQL API v4: User：<a href="https://developer.github.com/v4/object/user/" target="_blank" rel="noopener">https://developer.github.com/v4/object/user/</a></li></ul><p>对于 RESTful 风格而言，自然是要发起一个 <code>GET</code> 请求。由于我们要获取某个<strong>指定用户</strong>的数据，所以需要在 PATH 中指定 <code>:username</code>：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /users/:username</span><br></pre></td></tr></table></figure><p>请求成功后 GitHub 将会返回以下数据：</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"login"</span>: <span class="string">"octocat"</span>,</span><br><span class="line">  <span class="attr">"id"</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">"node_id"</span>: <span class="string">"MDQ6VXNlcjE="</span>,</span><br><span class="line">  <span class="attr">"avatar_url"</span>: <span class="string">"https://github.com/images/error/octocat_happy.gif"</span>,</span><br><span class="line">  <span class="attr">"gravatar_id"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"url"</span>: <span class="string">"https://api.github.com/users/octocat"</span>,</span><br><span class="line">  <span class="attr">"html_url"</span>: <span class="string">"https://github.com/octocat"</span>,</span><br><span class="line">  <span class="attr">"followers_url"</span>: <span class="string">"https://api.github.com/users/octocat/followers"</span>,</span><br><span class="line">  <span class="attr">"following_url"</span>: <span class="string">"https://api.github.com/users/octocat/following&#123;/other_user&#125;"</span>,</span><br><span class="line">  <span class="attr">"gists_url"</span>: <span class="string">"https://api.github.com/users/octocat/gists&#123;/gist_id&#125;"</span>,</span><br><span class="line">  <span class="attr">"starred_url"</span>: <span class="string">"https://api.github.com/users/octocat/starred&#123;/owner&#125;&#123;/repo&#125;"</span>,</span><br><span class="line">  <span class="attr">"subscriptions_url"</span>: <span class="string">"https://api.github.com/users/octocat/subscriptions"</span>,</span><br><span class="line">  <span class="attr">"organizations_url"</span>: <span class="string">"https://api.github.com/users/octocat/orgs"</span>,</span><br><span class="line">  <span class="attr">"repos_url"</span>: <span class="string">"https://api.github.com/users/octocat/repos"</span>,</span><br><span class="line">  <span class="attr">"events_url"</span>: <span class="string">"https://api.github.com/users/octocat/events&#123;/privacy&#125;"</span>,</span><br><span class="line">  <span class="attr">"received_events_url"</span>: <span class="string">"https://api.github.com/users/octocat/received_events"</span>,</span><br><span class="line">  <span class="attr">"type"</span>: <span class="string">"User"</span>,</span><br><span class="line">  <span class="attr">"site_admin"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"monalisa octocat"</span>,</span><br><span class="line">  <span class="attr">"company"</span>: <span class="string">"GitHub"</span>,</span><br><span class="line">  <span class="attr">"blog"</span>: <span class="string">"https://github.com/blog"</span>,</span><br><span class="line">  <span class="attr">"location"</span>: <span class="string">"San Francisco"</span>,</span><br><span class="line">  <span class="attr">"email"</span>: <span class="string">"octocat@github.com"</span>,</span><br><span class="line">  <span class="attr">"hireable"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"bio"</span>: <span class="string">"There once was..."</span>,</span><br><span class="line">  <span class="attr">"public_repos"</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">"public_gists"</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">"followers"</span>: <span class="number">20</span>,</span><br><span class="line">  <span class="attr">"following"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">"created_at"</span>: <span class="string">"2008-01-14T04:33:35Z"</span>,</span><br><span class="line">  <span class="attr">"updated_at"</span>: <span class="string">"2008-01-14T04:33:35Z"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但有时我们不需要这么多的数据，我们可能只想获取用户的头像地址。在 RESTful 风格的接口下，我们无法只获取某一条数据，但对于 GraphQL 接口，我们可以发起这样一条请求：</p><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    user(login: "username") &#123;</span><br><span class="line">        avatarUrl</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样一来，服务端将根据我们请求数据的格式，返回给我们对应的字段，即仅返回 <code>user</code> 下的 <code>avatarUrl</code> 数据：</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>:&#123;</span><br><span class="line">        <span class="attr">"user"</span>:&#123;</span><br><span class="line">            <span class="attr">"avatarUrl"</span>:<span class="string">"url"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>在 RESTful 中，我们被迫接收服务端已组装好的数据，但 GraphQL 给了我们更多的自由，让我们可以只取所需。</strong></p><p>除此之外，RESTful 以资源划分接口，数据之间相对离散，如果想请求不同的资源则需要发起多次请求。而 GraphQL 的数据更具整体性，资源之间以<strong>图</strong>（即 Graph 名称的由来）的形式彼此关联，一次请求即可获取多种资源。</p><h3 id="构造-GraphQL-请求"><a href="#构造-GraphQL-请求" class="headerlink" title="构造 GraphQL 请求"></a>构造 GraphQL 请求</h3><p>我想要获取的数据主要有：</p><ol><li>用户名</li><li>用户在 2019 年每日的贡献情况</li><li>用户 Followers 数量</li></ol><p>根据接口文档 <a href="https://developer.github.com/v4/object/user/" target="_blank" rel="noopener">User</a> 与  <a href="https://developer.github.com/v4/object/contributionscollection/" target="_blank" rel="noopener">ContributionsCollection</a> 可知，这些数据都在 <code>user</code> 中，对应的字段如下：</p><ul><li>用户昵称：<code>name</code></li><li>Followers 数量：<code>followers.totalCount</code></li><li>编码日历：<code>contributionsCollection.contributionCalendar</code><ul><li>总贡献数量：<code>totalContributions</code></li><li>每周贡献情况：<code>weeks</code><ul><li>每日贡献情况：<code>contributionDays</code><ul><li>当天日历颜色：<code>color</code></li><li>当天贡献数：<code>contributionCount</code></li><li>当天日期：<code>date</code></li></ul></li></ul></li></ul></li></ul><p>因此，可以构造出如下 <code>query</code>：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">query = <span class="string">"""</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    user(login: "%s") &#123;</span></span><br><span class="line"><span class="string">        followers &#123;</span></span><br><span class="line"><span class="string">            totalCount</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        name</span></span><br><span class="line"><span class="string">        contributionsCollection(</span></span><br><span class="line"><span class="string">            from: "%s",</span></span><br><span class="line"><span class="string">            to: "%s"</span></span><br><span class="line"><span class="string">        ) &#123;</span></span><br><span class="line"><span class="string">            contributionCalendar &#123;</span></span><br><span class="line"><span class="string">                totalContributions</span></span><br><span class="line"><span class="string">                weeks &#123;</span></span><br><span class="line"><span class="string">                    contributionDays &#123;</span></span><br><span class="line"><span class="string">                        color</span></span><br><span class="line"><span class="string">                        contributionCount</span></span><br><span class="line"><span class="string">                        date</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125; </span></span><br><span class="line"><span class="string">"""</span>% (github_id, begin, end)</span><br></pre></td></tr></table></figure><p>构造好 <code>query</code> 后，我们使用 <code>requests</code> 发起请求：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">access_token = <span class="string">"xxx"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 请求 headers 带上 access_token</span></span><br><span class="line">headers = &#123;<span class="string">"Authorization"</span>: <span class="string">"bearer %s"</span> % access_token&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发起请求</span></span><br><span class="line">response = requests.post(</span><br><span class="line">    <span class="string">"https://api.github.com/graphql"</span>,</span><br><span class="line">    headers=headers,</span><br><span class="line">    json=&#123;<span class="string">'query'</span>: query&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>若请求成功，GitHub 会返回如下格式的 JSON 数据：</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>:&#123;</span><br><span class="line">        <span class="attr">"user"</span>:&#123;</span><br><span class="line">            <span class="attr">"name"</span>:<span class="string">"江不知"</span>,</span><br><span class="line">            <span class="attr">"followers"</span>:&#123;</span><br><span class="line">                <span class="attr">"totalCount"</span>:<span class="number">71</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"contributionsCollection"</span>:&#123;</span><br><span class="line">                <span class="attr">"contributionCalendar"</span>:&#123;</span><br><span class="line">                    <span class="attr">"totalContributions"</span>:<span class="number">2234</span>,</span><br><span class="line">                    <span class="attr">"weeks"</span>:[</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="attr">"contributionDays"</span>:[</span><br><span class="line">                                &#123;</span><br><span class="line">                                    <span class="attr">"color"</span>:<span class="string">"#c6e48b"</span>,</span><br><span class="line">                                    <span class="attr">"contributionCount"</span>:<span class="number">30</span>,</span><br><span class="line">                                    <span class="attr">"date"</span>:<span class="string">"2019-01-01"</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数据统计"><a href="#数据统计" class="headerlink" title="数据统计"></a>数据统计</h2><p>我主要针对 <code>weeks</code> 做了一些简单的数据统计。主要包括：</p><ul><li>有提交代码的天数（<code>contributionCount &gt; 0</code>）</li><li>连续提交代码的最大天数</li><li>完成贡献次数最多的日期</li></ul><p>这些数据对 <code>weeks</code> 进行一次遍历即可得出，在此不多做赘述。</p><h2 id="设计报告"><a href="#设计报告" class="headerlink" title="设计报告"></a>设计报告</h2><p>作为一个后端开发，真的没有多少设计天赋，说多了都是泪……</p><p>整份报告大致分成三个区域：</p><ol><li>头部 Title</li><li>Title 下的「编码日历」</li><li>中间部分显示一些分析数据</li><li>底部宣示主权</li></ol><p>反反复复改了多版，询问了很多朋友的意见，最后的结果依旧不是很好看……</p><p><img src="/img/in-post/2019-github-annual-report/template.png" alt="年度报告设计最终版"></p><h2 id="数据拼接"><a href="#数据拼接" class="headerlink" title="数据拼接"></a>数据拼接</h2><p>报告设计完成以后就可以把最终要展示的数据拼接到报告上了。</p><h3 id="绘制「编码日历」"><a href="#绘制「编码日历」" class="headerlink" title="绘制「编码日历」"></a>绘制「编码日历」</h3><p>在遍历 <code>weeks</code> 统计数据的过程中，可以顺便完成「编码日历」的绘制。</p><p>「编码日历」中的每一天就是一个小方块，方块的颜色我们已经从接口返回数据的 <code>color</code> 字段中获取到了。我选择使用 <code>line()</code> 绘制一条颜色为 <code>color</code> 的直线代表方块，把直线的 <code>width</code> 加粗，以获得方块的效果。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageDraw</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开图片</span></span><br><span class="line">f = open(self.IMAGE_FILE_PATH, <span class="string">'rb'</span>)</span><br><span class="line">image = Image.open(f)</span><br><span class="line"><span class="comment"># 创建一个 draw 实例</span></span><br><span class="line">drawImage = ImageDraw.Draw(image)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历每周数据</span></span><br><span class="line"><span class="keyword">for</span> week <span class="keyword">in</span> weeks:</span><br><span class="line">    <span class="comment"># 遍历每日数据</span></span><br><span class="line">    <span class="keyword">for</span> day <span class="keyword">in</span> week[<span class="string">'contributionDays'</span>]:</span><br><span class="line">        <span class="comment"># 取出当天的颜色</span></span><br><span class="line">        color = day[<span class="string">'color'</span>] </span><br><span class="line">        <span class="comment"># 绘制直线</span></span><br><span class="line">        drawImage.line([(x_point, y_point), (x_point + square_width, y_point)], fill=color, width=square_width)</span><br><span class="line">        <span class="comment"># 改变下一个方格的 y 坐标</span></span><br><span class="line">        y_point += move_width</span><br><span class="line">    <span class="comment"># 改变下一个方格的 x 坐标</span></span><br><span class="line">    x_point += move_width</span><br><span class="line">    <span class="comment"># 下一周开始，y 坐标恢复原处</span></span><br><span class="line">    y_point = y_begin</span><br></pre></td></tr></table></figure><h3 id="粘贴文字"><a href="#粘贴文字" class="headerlink" title="粘贴文字"></a>粘贴文字</h3><p>报告的其他部分就主要是文字内容了，设置好字体、颜色等，使用 <code>text()</code> 在指定位置贴上文字。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageFont</span><br><span class="line"></span><br><span class="line">font_size = <span class="number">60</span></span><br><span class="line"><span class="comment"># 设置字体与字号</span></span><br><span class="line">font = ImageFont.truetype(<span class="string">"./font/fzlt.ttf"</span>, font_size)</span><br><span class="line">font_color = <span class="string">"#F7FFF7"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置坐标</span></span><br><span class="line">x, y = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在图片写上文字</span></span><br><span class="line">draImage.text((x, y), <span class="string">"要显示的文字"</span>, fill=font_color, font=font)</span><br></pre></td></tr></table></figure><h2 id="接入公众号"><a href="#接入公众号" class="headerlink" title="接入公众号"></a>接入公众号</h2><p>公众号方面直接使用了开发框架 <a href="https://github.com/offu/WeRoBot" target="_blank" rel="noopener">WeRoBot</a>。</p><p>设定：当用户发送信息为「2019 $github_id」时触发生成年度报告。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> werobot</span><br><span class="line"></span><br><span class="line">robot = werobot.WeRoBot(token=<span class="string">'token'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 回复包含指定文本的信息</span></span><br><span class="line"><span class="meta">@robot.filter(re.compile("2019(\s)+(.*)?"))</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">annual_report</span><span class="params">(message, session, match)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> match:</span><br><span class="line">        <span class="comment"># do something...</span></span><br></pre></td></tr></table></figure><p>生成年度报告后，我们使用微信的<a href="https://developers.weixin.qq.com/doc/offiaccount/Asset_Management/New_temporary_materials.html" target="_blank" rel="noopener">新增临时素材</a>接口上传报告图片，并获取到临时素材的编号 <code>media_id</code>：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> werobot.client <span class="keyword">import</span> Client</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">"APP_ID"</span>: <span class="string">"app_id"</span>,</span><br><span class="line">    <span class="string">"APP_SECRET"</span>: <span class="string">"app_secret"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">client = Client(config)</span><br><span class="line"><span class="comment"># 上传临时素材</span></span><br><span class="line">response = client.upload_media(<span class="string">'image'</span>, image) <span class="comment"># image 为生成的报告图片</span></span><br><span class="line"><span class="comment"># 获取临时素材 ID</span></span><br><span class="line">media_id = response[<span class="string">'media_id'</span>]</span><br></pre></td></tr></table></figure><p>然后，我们再将这一图片信息返回给用户：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> werobot.replies <span class="keyword">import</span> ImageReply</span><br><span class="line"></span><br><span class="line"><span class="comment"># 要返回的图片数据</span></span><br><span class="line">reply = ImageReply(message=message, media_id=media_id)</span><br><span class="line"><span class="keyword">return</span> reply</span><br></pre></td></tr></table></figure><h2 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h2><p>当用户在公众号发送 <code>2019+空格+github_id</code> 时，将返回 <code>github_id</code> 所对应的报告。最终生成的报告如下：</p><p><img src="/img/in-post/2019-github-annual-report/result.png" alt="我的 2019 GitHub 年度报告"></p><p>源码见 GitHub 仓库：<a href="https://github.com/JalanJiang/2019-github-annual-report" target="_blank" rel="noopener">https://github.com/JalanJiang/2019-github-annual-report</a></p><p>接入的服务器为辣鸡配置，还请各位大佬手下留情。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>整个过程涉及到微信公众号和 GitHub 接口的调用，用户从输入到数据返回需要等待几秒的时间。为了避免超时的尴尬情况，这里只对用户提交记录做了简单的分析。</p><p>在完成这个项目的过程中几度因为设计出的报告太丑而想要放弃，感谢几位朋友一直鼓励我、给我提出修改意见才让我坚持了下来。</p><p>2019 年再见啦，希望 2020 年能尝试更多有趣的事情。:)</p>]]></content>
    
    <summary type="html">
    
      你有一份 2019 年技术总结待查收
    
    </summary>
    
      <category term="Web屠龙刀" scheme="http://jalan.space/categories/Web%E5%B1%A0%E9%BE%99%E5%88%80/"/>
    
    
      <category term="Python" scheme="http://jalan.space/tags/Python/"/>
    
      <category term="GitHub" scheme="http://jalan.space/tags/GitHub/"/>
    
      <category term="GraphQL" scheme="http://jalan.space/tags/GraphQL/"/>
    
  </entry>
  
  <entry>
    <title>贪心算法与正确性归纳证明</title>
    <link href="http://jalan.space/2019/12/11/2019/greedy/"/>
    <id>http://jalan.space/2019/12/11/2019/greedy/</id>
    <published>2019-12-11T15:05:00.000Z</published>
    <updated>2019-12-11T15:12:35.354Z</updated>
    
    <content type="html"><![CDATA[<h2 id="主要思想"><a href="#主要思想" class="headerlink" title="主要思想"></a>主要思想</h2><p>贪心算法就是让计算机模拟一个「贪心的人」来做出决策。这个贪心的人是目光短浅的，他每次总是：</p><ul><li>只做出<strong>当前看来最好的选择</strong></li><li><strong>只看眼前的利益，而不考虑做出选择后对未来造成的影响</strong></li></ul><p>并且他一旦做出了选择，就没有办法反悔（不可回溯），所以为了利益最大化，他需要保证绝不能做出错误的选择。</p><p>贪心算法不是从整体最优的角度上考虑问题，而是只在意某种意义上的局部最优解。因此，贪心算法并不能保证在所有情况下都能获得最优解。所以在使用贪心算法时，<strong>我们需要确保自己能证明最优解的正确性</strong>。</p><h2 id="贪心性质"><a href="#贪心性质" class="headerlink" title="贪心性质"></a>贪心性质</h2><p>可以用贪心算法解决的题目需要满足以下性质：</p><ul><li>最优子结构：一个问题的最优解包含其子问题的最优解</li><li>贪心选择性：所求问题的整体最优解可以通过一系列局部最优的选择来到达，即通过贪心选择来达到</li></ul><h2 id="证明方法"><a href="#证明方法" class="headerlink" title="证明方法"></a>证明方法</h2><p><strong>贪心算法最难的部分从不在于问题的求解，而在于正确性的证明</strong>，常用的证明方法有<strong>归纳法</strong>和<strong>交换论证法</strong>。</p><ul><li>归纳法：对算法进行<strong>步数归纳</strong>或<strong>问题规模归纳</strong></li><li>交换论证法：从最优解出发，在保证最优性不变的前提下，从一个最优解进行逐步替换，从而得到贪心策略的解</li></ul><p>因篇幅有限，本篇我们主要说说归纳证明。归纳证明的本质其实就是<a href="https://zh.wikipedia.org/wiki/%E6%95%B0%E5%AD%A6%E5%BD%92%E7%BA%B3%E6%B3%95" title="数学归纳法" target="_blank" rel="noopener">数学归纳法</a>，我们先来复习下数学归纳法吧。</p><h2 id="数学归纳法"><a href="#数学归纳法" class="headerlink" title="数学归纳法"></a>数学归纳法</h2><p>数学归纳法（<em>Mathematical Induction</em>）是一种<a href="https://zh.wikipedia.org/wiki/%E6%95%B8%E5%AD%B8%E8%AD%89%E6%98%8E" title="数学证明" target="_blank" rel="noopener">数学证明</a>方法，通常被用于证明某个给定命题在整个（或者局部）自然数范围内成立。</p><h3 id="证明步骤"><a href="#证明步骤" class="headerlink" title="证明步骤"></a>证明步骤</h3><p>最简单和常见的数学归纳法是证明当 n 等于任意一个自然数时某命题成立。证明分下面两步：</p><ol><li>证明当 <code>n = 1</code> 时，命题成立</li><li>证明如果在 <code>n = m</code>（m 为任意自然数）时命题成立，那么可以推导出 <code>n = m + 1</code> 时命题也成立</li></ol><p><strong>1 为归纳基础，2 为归纳步骤</strong>。</p><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>该方法的原理在于：一旦我们证明了在某个起点值（例如 <code>n = 1</code>）时命题成立，且证明出从一个值到下一个值的过程有效（即 <code>n = m</code> 到 <code>n = m + 1</code>），那么任意值都可以通过反复使用这个方法推导出来。即：</p><p>$$P(1) 为真，$$</p><p>$$且 \forall n, P(n) 为真 \to P(n + 1) 为真$$</p><p>那么：</p><p>$$n = 1, P(1) 为真 \to P(2) 为真$$</p><p>$$n = 2, P(2) 为真 \to P(3) 为真$$</p><p>$$……$$</p><h3 id="举个例子"><a href="#举个例子" class="headerlink" title="举个例子"></a>举个例子</h3><p>如果我们要证明对于任意自然数，都满足：</p><p>$$1 + 2 + … + n = \frac {n \times (1 + n)}{2}$$</p><h4 id="归纳基础"><a href="#归纳基础" class="headerlink" title="归纳基础"></a>归纳基础</h4><p>找到起始点，即 <code>n = 1</code> 时，此时等式左侧等于 1，右侧等于：</p><p>$$\frac {1 \times (1 + 1)}{2} = \frac {2}{2} = 1$$</p><p>左右两侧相等，因此在 <code>n = 1</code> 时，命题成立。</p><h4 id="归纳步骤"><a href="#归纳步骤" class="headerlink" title="归纳步骤"></a>归纳步骤</h4><p>先假设：对于任意自然数 n 命题均成立。</p><p>那么，当 <code>n = n + 1</code> 时：</p><p>$$1 + 2 + … + (n + 1)$$</p><p>$$= (1 + 2 + … + n) + (n + 1)$$</p><p>$$= \frac {n \times (1 + n)}{2} + (n + 1)$$</p><p>$$= \frac {n \times (1 + n)}{2} + \frac{2 \times (n + 1)}{2}$$</p><p>$$= \frac{(n + 1) \times (n + 2)}{2}$$</p><p>因此，在 <code>n = n + 1</code> 时，命题也成立。证毕。</p><h2 id="算法正确性归纳证明"><a href="#算法正确性归纳证明" class="headerlink" title="算法正确性归纳证明"></a>算法正确性归纳证明</h2><p>归纳证明的证明步骤如下：</p><ol><li>叙述一个有关自然数 <code>n</code> 的命题，该命题断定贪心策略的执行最终将导致最优解，其中自然数 <code>n</code> 可以代表<strong>算法步数</strong>或者<strong>问题规模</strong>。</li><li>证明该问题对所有自然数为真</li></ol><p>其中，步骤二使用数学归纳法证明，即践行归纳基础与归纳步骤。</p><p>下面我们就来看下如何使用归纳法来证明 Kruskal 算法的正确性。</p><h2 id="Kruskal-最小生成树"><a href="#Kruskal-最小生成树" class="headerlink" title="Kruskal 最小生成树"></a>Kruskal 最小生成树</h2><p><a href="https://zh.wikipedia.org/wiki/%E5%85%8B%E9%B2%81%E6%96%AF%E5%85%8B%E5%B0%94%E6%BC%94%E7%AE%97%E6%B3%95" title="Kruskal 算法" target="_blank" rel="noopener">Kruskal 算法</a>是一种常见并且好写的<a href="https://zh.wikipedia.org/wiki/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91" title="最小生成树" target="_blank" rel="noopener">最小生成树</a>算法，由 Kruskal 发明。该算法基于贪心思想，基本思想是<strong>从小到大加入边</strong>。</p><h3 id="主要思想-1"><a href="#主要思想-1" class="headerlink" title="主要思想"></a>主要思想</h3><ol><li>将图的<strong>边按权值大小</strong>从小到大依次选取</li><li>选取权值最小的边 edge，假设构成该边的两个点为 (point1, point2)，如果 point1 和 point2 已在一个连通图中，则舍弃该边；否则讲该边加入最小生成树中</li><li>重复步骤 2，直到构成最小生成树为止</li></ol><p><img src="/img/in-post/greedy.gif" alt="图源：维基百科"></p><h3 id="正确性证明"><a href="#正确性证明" class="headerlink" title="正确性证明"></a>正确性证明</h3><h4 id="叙述命题"><a href="#叙述命题" class="headerlink" title="叙述命题"></a>叙述命题</h4><p>首先，给出命题：对于任意 n，该算法对 n 阶图都能得到一棵最小生成树。</p><h4 id="归纳基础-1"><a href="#归纳基础-1" class="headerlink" title="归纳基础"></a>归纳基础</h4><p>当 <code>n = 2</code> 时，此时只有一条边，命题显然为真。</p><h4 id="归纳步骤-1"><a href="#归纳步骤-1" class="headerlink" title="归纳步骤"></a>归纳步骤</h4><p>假设对于 n 个顶点的图，该算法正确，考虑 n + 1 个定点的图 $G$，假设 $G$ 中最小边权为 $e = {i, j}$。</p><p>此时，在图 $G$ 中连接点 $i$ 与点 $j$，得到图 $G’$。</p><p>根据归纳假设，由算法可推出：存在 $G’$ 的最小生成树 $T’$。令 $T = T’ \bigcup {e}$，则 $T$ 是关于 $G$ 的最小生成树。</p><p><strong>反证</strong>：若 $T$ 不是 $G$ 的最小生成树，那么必然存在某包含 $e$ 边的最小生成树 $T^<em>$，使得 $W(T^</em>) &lt; W(T)$（即 $T^*$ 的边权小于 $T$）。</p><p>此时，在 $T^<em>$ 中删除 $e$ 边，可得到 G’ 的最小生成树 $T^</em> - {e}$，且有：</p><p>$$<br>W(T^* - {e}) =</p><p>W(T^*) - w(e) &lt;</p><p>W(T) - w(e) =</p><p>W(T’)<br>$$</p><p>该表达式与 $T’$ 是最优解相互矛盾，所以 $T$ 必然是 $G$ 的最小生成树，证毕。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>贪心算法不是从整体最优的角度上考虑问题，而是只考虑某种意义上的局部最优解，不可回溯，不考虑后果</li><li>可以用贪心解答的题目需要满足<strong>最优子结构</strong>与<strong>贪心选择性</strong></li><li>贪心算法并不能保证在所有情况下都能获得最优解，所以在使用贪心算法时需要证明算法的正确性，常见的证明方法有<strong>归纳法</strong>与<strong>交换论证法</strong></li><li>数学归纳法通常被用于证明某个给定命题在整个（或者局部）自然数范围内成立，证明过程为<strong>归纳基础</strong>+<strong>归纳步骤</strong></li><li>归纳证明需先给出命题，再用数学归纳法证明该命题对所有自然数为真</li></ul><p><img src="/img/qrcode/wechat.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      贪心算法最难的部分从不在于问题的求解，而在于正确性的证明。
    
    </summary>
    
      <category term="技多不压身" scheme="http://jalan.space/categories/%E6%8A%80%E5%A4%9A%E4%B8%8D%E5%8E%8B%E8%BA%AB/"/>
    
    
      <category term="算法" scheme="http://jalan.space/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>聊聊 Go 语言中的面向对象编程</title>
    <link href="http://jalan.space/2019/12/02/2019/go-oop/"/>
    <id>http://jalan.space/2019/12/02/2019/go-oop/</id>
    <published>2019-12-02T12:40:00.000Z</published>
    <updated>2019-12-02T12:40:48.450Z</updated>
    
    <content type="html"><![CDATA[<p>我们知道，在 Go 语言中没有类（Class）的概念，但这并不意味着 Go 语言不支持<a href="https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1" title="面向对象编程" target="_blank" rel="noopener">面向对象编程</a>，毕竟面向对象只是一种编程思想。</p><p>让我们回忆一下面向对象的三大基本特征：</p><ol><li>封装：隐藏对象的属性和实现细节，仅对外提供公共访问方式</li><li>继承：使得子类具有父类的属性和方法或者重新定义、追加属性和方法等</li><li>多态：不同对象中同种行为的不同实现方式</li></ol><p>我们一起来看看 Go 语言是如何在没有类（Class）的情况下实现这三大特征的。</p><h2 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h2><h3 id="「类」"><a href="#「类」" class="headerlink" title="「类」"></a>「类」</h3><p>在 Go 语言中可以使用<a href="https://gobyexample.com/structs" title="结构体" target="_blank" rel="noopener">结构体</a>（<em>Structs</em>）对属性进行封装，结构体就像是类的一种简化形式。</p><p>例如，我们要定义一个矩形，每个矩形都有长和宽，我们可以这样进行封装：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Rectangle <span class="keyword">struct</span> &#123;</span><br><span class="line">Length <span class="keyword">int</span></span><br><span class="line">Width <span class="keyword">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>既然有了「类」，你可能会问了，那「类」的<strong>方法</strong>在哪呢？</p><p>Go 语言中也有<a href="https://gobyexample.com/methods" title="方法" target="_blank" rel="noopener">方法</a>（<em>Methods</em>）：<strong>Go 方法是作用在接收者（<em>receiver</em>）上的一个函数，接收者是某种类型的变量。因此方法是一种特殊类型的函数。</strong></p><p>定义方法的格式如下：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(recv receiver_type)</span> <span class="title">methodName</span><span class="params">(parameter_list)</span> <span class="params">(return_value_list)</span></span> &#123; ... &#125;</span><br></pre></td></tr></table></figure><p>上文中我们已经定义了一个矩形 <code>Rectangle</code>，现在我们要定义一个方法 <code>Area()</code> 来计算它的面积：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 矩形结构体</span></span><br><span class="line"><span class="keyword">type</span> Rectangle <span class="keyword">struct</span> &#123;</span><br><span class="line">Length <span class="keyword">int</span></span><br><span class="line">Width  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算矩形面积</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Rectangle)</span> <span class="title">Area</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> r.Length * r.Width</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">r := Rectangle&#123;<span class="number">4</span>, <span class="number">2</span>&#125;</span><br><span class="line"><span class="comment">// 调用 Area() 方法，计算面积</span></span><br><span class="line">fmt.Println(r.Area())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的代码片段输出结果为 8。</p><h3 id="访问权限"><a href="#访问权限" class="headerlink" title="访问权限"></a>访问权限</h3><p>我们常会说一个类的属性是<strong>公共</strong>的还是<strong>私有</strong>的，在其他编程语言中，我们常用 <code>public</code> 与 <code>private</code> 关键字来表达这样一种访问权限。</p><p>在 Go 语言中没有 <code>public</code>、<code>private</code>、<code>protected</code> 这样的访问控制修饰符，它是<strong>通过字母大小写来控制可见性</strong>的。</p><p>如果定义的常量、变量、类型、接口、结构、函数等的名称是大写字母开头，这表示它们能被<strong>其它包</strong>访问或调用（相当于 <code>public</code>）；非大写开头就只能在<strong>包内使用</strong>（相当于 <code>private</code>）。</p><h3 id="访问未导出字段"><a href="#访问未导出字段" class="headerlink" title="访问未导出字段"></a>访问未导出字段</h3><p>当遇到<strong>只能在包内使用的未导出字段</strong>时，我们又该如何访问呢？</p><p>和其他面向对象语言一样，Go 语言也有实现 <code>getter</code> 和 <code>setter</code> 的方式：</p><ul><li>对于 <code>setter</code> 方法使用 <code>Set</code> 前缀</li><li>对于 <code>getter</code> 方法<strong>只使用成员名</strong></li></ul><p>例如我们现在有一个处于 <code>person</code> 包中的 <code>Person</code> 结构体：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> person</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">firstName <span class="keyword">string</span></span><br><span class="line">lastName  <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以看到，它的两个成员变量都是<strong>非大写字母开头</strong>，只能在包内使用，现在我们为其中的 <code>firstName</code> 来定义 <code>setter</code> 与 <code>getter</code> ：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取 firstName</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span> <span class="title">FirstName</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> p.firstName</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置 firstName</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span> <span class="title">SetFirstName</span><span class="params">(newName <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">p.firstName = newName</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样一来，我们就可以在 <code>main</code> 包里设置和获取 <code>firstName</code> 的值了：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="string">"./person"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">p := <span class="built_in">new</span>(person.Person)</span><br><span class="line">p.SetFirstName(<span class="string">"firstName"</span>)</span><br><span class="line">fmt.Println(p.FirstName())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">firstName</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>在 Go 语言中没有 <code>extends</code> 关键字，它使用<strong>在结构体中内嵌匿名类型</strong>的方法来实现继承。</p><blockquote><p>匿名类型：即这些类型没有显式的名字。</p></blockquote><p>我们定义一个 <code>Engine</code> 接口类型，一个 <code>Car</code> 结构体，让 <code>Car</code> 结构体包含一个 <code>Engine</code> 类型的匿名字段：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Engine <span class="keyword">interface</span> &#123;</span><br><span class="line">Start()</span><br><span class="line">Stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Car <span class="keyword">struct</span> &#123;</span><br><span class="line">Engine <span class="comment">// 包含 Engine 类型的匿名字段</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时，匿名字段 <code>Engine</code> 上的方法「<strong>晋升</strong>」成为了外层类型 <code>Car</code> 的方法。我们可以构建出如下代码：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Car)</span> <span class="title">GoToWorkIn</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// get in car</span></span><br><span class="line">c.Start()</span><br><span class="line"><span class="comment">// drive to work</span></span><br><span class="line">c.Stop()</span><br><span class="line"><span class="comment">// get out of car</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><p>在面向对象中，多态的特征为：<strong>不同对象中同种行为的不同实现方式</strong>。在 Go 语言中可以使用<a href="https://gobyexample.com/interfaces" title="接口" target="_blank" rel="noopener">接口</a>实现这一特征。</p><p>我们先定义一个正方形 <code>Square</code> 和一个长方形 <code>Rectangle</code>：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 正方形</span></span><br><span class="line"><span class="keyword">type</span> Square <span class="keyword">struct</span> &#123;</span><br><span class="line">side <span class="keyword">float32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 长方形</span></span><br><span class="line"><span class="keyword">type</span> Rectangle <span class="keyword">struct</span> &#123;</span><br><span class="line">length, width <span class="keyword">float32</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后，我们希望可以计算出这两个几何图形的面积。但由于他们的面积计算方式不同，我们需要定义两个不同的 <code>Area()</code> 方法。</p><p>于是，我们可以定义一个包含 <code>Area()</code> 方法的接口 <code>Shaper</code>，让 <code>Square</code> 和 <code>Rectangle</code> 都实现这个接口里的 <code>Area()</code>：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 接口 Shaper</span></span><br><span class="line"><span class="keyword">type</span> Shaper <span class="keyword">interface</span> &#123;</span><br><span class="line">Area() <span class="keyword">float32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算正方形的面积</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(sq *Square)</span> <span class="title">Area</span><span class="params">()</span> <span class="title">float32</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> sq.side * sq.side</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算长方形的面积</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Rectangle)</span> <span class="title">Area</span><span class="params">()</span> <span class="title">float32</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> r.length * r.width</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以在 <code>main()</code> 函数中这样调用 <code>Area()</code>：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">r := &amp;Rectangle&#123;<span class="number">10</span>, <span class="number">2</span>&#125;</span><br><span class="line">q := &amp;Square&#123;<span class="number">10</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个 Shaper 类型的数组</span></span><br><span class="line">shapes := []Shaper&#123;r, q&#125;</span><br><span class="line"><span class="comment">// 迭代数组上的每一个元素并调用 Area() 方法</span></span><br><span class="line"><span class="keyword">for</span> n, _ := <span class="keyword">range</span> shapes &#123;</span><br><span class="line">fmt.Println(<span class="string">"图形数据: "</span>, shapes[n])</span><br><span class="line">fmt.Println(<span class="string">"它的面积是: "</span>, shapes[n].Area())</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">图形数据:  &amp;&#123;10 2&#125;</span></span><br><span class="line"><span class="comment">它的面积是:  20</span></span><br><span class="line"><span class="comment">图形数据:  &amp;&#123;10&#125;</span></span><br><span class="line"><span class="comment">它的面积是:  100</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>由以上代码输出结果可知：<strong>不同对象调用 <code>Area()</code> 方法产生了不同的结果</strong>，展现了多态的特征。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>面向对象的三大特征是：封装、继承和多态</li><li>Go 语言使用<strong>结构体</strong>对属性进行封装，结构体就像是类的一种简化形式</li><li>在 Go 语言中，方法是作用在接收者（<em>receiver</em>）上的一个函数，接收者是某种类型的变量</li><li>名称首字母的大小写决定了该变量/常量/类型/接口/结构/函数……能否被外部包导入</li><li>无法被导入的字段可以使用 <code>getter</code> 和 <code>setter</code> 的方式来访问</li><li>Go 语言使用<strong>在结构体中内嵌匿名类型</strong>的方法来实现继承</li><li>使用接口可以实现多态</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li>《Go 入门指南》: _<a href="https://github.com/unknwon/the-way-to-go_ZH_CN" target="_blank" rel="noopener">https://github.com/unknwon/the-way-to-go_ZH_CN</a>_</li></ul><hr><p><img src="/img/qrcode/wechat.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      面向对象三大特征以及在 Go 中的表现方式
    
    </summary>
    
      <category term="Web屠龙刀" scheme="http://jalan.space/categories/Web%E5%B1%A0%E9%BE%99%E5%88%80/"/>
    
    
      <category term="Go" scheme="http://jalan.space/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>深入浅出：举个例子解读原码、反码与补码</title>
    <link href="http://jalan.space/2019/11/26/2019/binary-show/"/>
    <id>http://jalan.space/2019/11/26/2019/binary-show/</id>
    <published>2019-11-26T07:29:00.000Z</published>
    <updated>2019-11-26T14:15:41.470Z</updated>
    
    <content type="html"><![CDATA[<p>先来看一道 Go 语言中简单的运算题：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">var</span> a <span class="keyword">int8</span> = <span class="number">-128</span></span><br><span class="line">        <span class="keyword">var</span> b = a / <span class="number">-1</span></span><br><span class="line">        fmt.Println(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 Go 语言中，<code>int8</code> 代表<strong>有符号</strong> 8 位整数。你觉得输出结果是什么呢？我们在文末再公布答案，在此之前，我们先来回顾一下有符号整数是什么。</p><h2 id="有符号整数"><a href="#有符号整数" class="headerlink" title="有符号整数"></a>有符号整数</h2><p>一个数在计算机中的<strong>二进制表示</strong>称为<strong>机器数</strong>，这个机器数是带符号的。它的最高位是符号位，0 代表正数，1 代表负数。</p><p>以 8 位有符号整数为例，<code>0000 0001</code> 代表十进制中的 1，<code>1000 0001</code> 则代表十进制中的 -1。</p><p><img src="https://user-gold-cdn.xitu.io/2019/11/26/16ea804b49ccf4ba?w=768&amp;h=336&amp;f=png&amp;s=23988" alt=""></p><p>那么，你可能会问了：这样一来，8 位有符号整数的可表达范围应当是 [<code>1111 1111</code>, <code>0111 1111</code>]，即 [-127, 127]，但实际上它的可表达范围却是 [-128, 127]，那么 -128 又从何而来呢？</p><p>想要理解 -128 的来历，我们还要知道原码、反码和补码的概念。</p><h2 id="原码、反码和补码"><a href="#原码、反码和补码" class="headerlink" title="原码、反码和补码"></a>原码、反码和补码</h2><p>计算机需要使用特定的编码方式存储数据，原码、反码和补码都是一种特定的编码方式。以下示例均以 8 位二进制数举例。</p><h3 id="原码"><a href="#原码" class="headerlink" title="原码"></a>原码</h3><p>原码是「未经更改的码」，指一个<strong>二进制数左边加上符号位</strong>后所得到的码。</p><ul><li>当二进制数大于 0 时，符号位为 0</li><li>当二进制数小于 0 时，符号位为 1</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/11/26/16ea804b44bd180d?w=650&amp;h=372&amp;f=png&amp;s=13007" alt="-127 和 127 的原码表示"></p><p>因此，用这种编码方式表示有符号的 8 位二进制数，它的取值范围是 [<code>1111 1111</code>, <code>0111 1111</code>]，即 [-127, 127]。</p><p>如果我们使用原码计算 <code>(+1) + (-1)</code> 会得到什么结果呢？</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(+1) + (-1) = </span><br><span class="line"></span><br><span class="line">0000 0001（原码） </span><br><span class="line">+</span><br><span class="line">1000 0001（原码）</span><br><span class="line">=</span><br><span class="line">1000 0010（原码） </span><br><span class="line">=</span><br><span class="line">(-2)</span><br></pre></td></tr></table></figure><p>What? 等于 -2 了？这显然是错误的答案。</p><h3 id="反码"><a href="#反码" class="headerlink" title="反码"></a>反码</h3><p>为了解决「正负数相加」的问题，人类又发明了<strong>反码</strong>。</p><p>反码的表示方式为：</p><ul><li>正数的反码等于它的原码</li><li>负数的反码则保留其原码符号位，然后对其他位进行取反操作</li></ul><blockquote><p>取反操作：将 0 变为 1，1 变为 0。</p></blockquote><p><img src="https://user-gold-cdn.xitu.io/2019/11/26/16ea804b4593fb28?w=885&amp;h=586&amp;f=png&amp;s=46240" alt="原码 -&gt; 反码"></p><p>此时，用反码来计算 <code>(+1) + (-1)</code>：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(+1) + (-1) = </span><br><span class="line"></span><br><span class="line">0000 0001（反码） </span><br><span class="line">+</span><br><span class="line">1111 1110（反码） </span><br><span class="line">= </span><br><span class="line">1111 1111（反码） </span><br><span class="line">=</span><br><span class="line">(-0)</span><br></pre></td></tr></table></figure><p>我们知道，0 的原码是 <code>0000 0000</code> 或 <code>1000 0000</code>，0 的反码就是 <code>0000 0000</code> 或 <code>1111 1111</code>。即在反码中，<code>1111 1111</code> 象征 <code>-0</code>，我们终于求出了正确的结果。</p><h3 id="补码"><a href="#补码" class="headerlink" title="补码"></a>补码</h3><p>但反码的表示方法中存在着 <code>+0</code> 和 <code>-0</code> 两个零，我们希望只有一个 0，所以<strong>补码</strong>[^3]出现了。</p><p>补码的表示方式为：</p><ul><li>正数的补码是其本身</li><li>负数的补码是在它的反码基础上加 1</li></ul><p><img src="https://user-gold-cdn.xitu.io/2019/11/26/16ea804b4c51d596?w=899&amp;h=832&amp;f=png&amp;s=68376" alt="原码 -&gt; 反码 -&gt; 补码"></p><p>由于 <code>+1</code> 的操作，必将出现进位，<strong>如果进位超过长度限制，最高位就会丢失</strong>。</p><p>会发生最高位丢失的数就是 <code>-0</code> 的反码表示 <code>1111 1111</code>，它的补码为 <code>1 0000 0000</code>。由于长度是 8 位，最高位的 1 已经溢出，所以丢弃，<code>-0</code> 的补码就成了 <code>0000 0000</code>，和刚才我们所提到的 <code>+0</code> 完美重合了！</p><p>用补码来计算 <code>(+1) + (-1)</code>：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(+1) + (-1) = </span><br><span class="line"></span><br><span class="line">0000 0001（补码） </span><br><span class="line">+</span><br><span class="line">1111 1111（补码） </span><br><span class="line">= </span><br><span class="line">0000 0000（补码） </span><br><span class="line">=</span><br><span class="line">(0)</span><br></pre></td></tr></table></figure><p>答案正确！</p><p><strong>因此，计算机内部使用补码方式表示负数，因为它让「正数 + 负数」也能使用同一套加法规则，使得所有的加法运算可以使用同一种电路完成。</strong></p><h2 id="128-的由来"><a href="#128-的由来" class="headerlink" title="-128 的由来"></a>-128 的由来</h2><p>上面我们说到如果用补码的方式进行表示，<code>-0</code> 就不存在了，为了让有限的位数尽可能表示更多的数，省下的 <code>1000 0000</code> 就用来表示 <code>-128</code> 了。</p><p>让我们用补码来计算一下 <code>(-1) + (-127)</code>：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(-1) + (-127) = </span><br><span class="line"></span><br><span class="line">1000 0001（原码）+</span><br><span class="line">1111 1111（原码）</span><br><span class="line">=</span><br><span class="line">1111 1110（反码）+</span><br><span class="line">1000 0000（反码）</span><br><span class="line">=</span><br><span class="line">1111 1111（补码）+</span><br><span class="line">1000 0001（补码） </span><br><span class="line">=</span><br><span class="line">1 1000 0000（补码）</span><br><span class="line">=</span><br><span class="line">1000 0000（丢弃最高位）</span><br><span class="line">= </span><br><span class="line">(-128)</span><br></pre></td></tr></table></figure><p><code>(-1) + (-127)</code> 的结果正是 -128。但由于 <code>1000 0000</code> 是 <code>-0</code> 的补码，所以 <code>-128</code> 没有与之对应的原码和反码表示。</p><h2 id="公布答案"><a href="#公布答案" class="headerlink" title="公布答案"></a>公布答案</h2><p>好了，让我们再回头看一下开头的那段代码：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">var</span> a <span class="keyword">int8</span> = <span class="number">-128</span></span><br><span class="line">        <span class="keyword">var</span> b = a / <span class="number">-1</span></span><br><span class="line">        fmt.Println(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>显而易见了：<code>int8</code> 的可表示范围是 <code>[-128, 127]</code>，所以可以被赋值为 -128。而 <code>(-128) / (-1) = 128</code> 显然超过了该表示范围，+128 用有符号整数表示需要 9 位，表示为 <code>0 1000 0000</code>，最高位的 0 已经溢出，所以丢弃，导致结果是 <code>1000 0000</code>，即 -128。</p><p>所以这段代码的输出结果就是 -128 啦~</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li><code>int8</code> 表示有符号 8 位整数，它的可表示范围是 <code>[-128, 127]</code></li><li>计算机内部使用补码方式表示负数</li><li>补码解决了 <code>+0</code> 和 <code>-0</code> 并存的问题，并省下 <code>-0</code> 的表示方法，多表示了一个最低数 -128</li><li>补码使得所有整数集都能使用同一套加法规则</li><li>如果发生溢出，多出的高位将被截取</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://zh.wikipedia.org/wiki/%E5%8E%9F%E7%A0%81" target="_blank" rel="noopener">维基百科-原码</a></li><li><a href="https://zh.wikipedia.org/zh-hans/%E5%8F%8D%E7%A0%81" target="_blank" rel="noopener">维基百科-反码</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%8F%8D%E7%A0%81" target="_blank" rel="noopener">维基百科-补码</a> </li></ul><h2 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h2><ul><li><a href="https://mp.weixin.qq.com/s/5_ly1EqGShhLKsNHr8fzwA" target="_blank" rel="noopener">聊聊 Go 语言中的字符表示与字符串遍历</a></li><li><a href="https://mp.weixin.qq.com/s/wAjlIFZ3d9rnTU2QGyxniw" target="_blank" rel="noopener">认识 Go 语言中的数组</a></li></ul><hr><p><img src="/img/qrcode/wechat.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      计算机中为什么使用补码表示负数呢？
    
    </summary>
    
      <category term="Web屠龙刀" scheme="http://jalan.space/categories/Web%E5%B1%A0%E9%BE%99%E5%88%80/"/>
    
    
      <category term="Go" scheme="http://jalan.space/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>认识 Go 语言中的数组</title>
    <link href="http://jalan.space/2019/11/21/2019/go-array/"/>
    <id>http://jalan.space/2019/11/21/2019/go-array/</id>
    <published>2019-11-21T12:59:00.000Z</published>
    <updated>2019-11-21T13:22:56.042Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>数组是具有<strong>相同唯一类型</strong>的一组<strong>已编号</strong>且<strong>长度固定</strong>的数据项序列。</p></blockquote><h2 id="声明方式"><a href="#声明方式" class="headerlink" title="声明方式"></a>声明方式</h2><p>在 Go 语言中，数组的声明方式为 <code>var identifier [len]type</code>。</p><p>声明时没有指定数组的初始化值，因此所有的元素都会被<strong>自动初始化为默认值 0</strong>。</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 声明一个数组</span></span><br><span class="line"><span class="keyword">var</span> a1 [<span class="number">5</span>]<span class="keyword">int</span></span><br></pre></td></tr></table></figure><p>Go 语言中的数组是值类型，因此还可以用 <code>new</code> 来创建：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a2 = <span class="built_in">new</span>([<span class="number">5</span>]<span class="keyword">int</span>)</span><br></pre></td></tr></table></figure><p><code>new</code> 返回类型的指针，因此 <code>a1</code> 与 <code>a2</code> 的区别在于：<code>a1</code> 的类型为 <code>[5]int</code>，<code>a2</code> 的类型为 <code>*[5]int</code>。</p><h2 id="初始化方法"><a href="#初始化方法" class="headerlink" title="初始化方法"></a>初始化方法</h2><p>我们通过在 <code>{}</code> 中填写初始化值来初始化数组。</p><h3 id="指明数组长度"><a href="#指明数组长度" class="headerlink" title="指明数组长度"></a>指明数组长度</h3><p>指明数组的长度 <code>len</code>，然后在 <code>{}</code> 中填写初始化值，这些值会按下标从小到大的顺序分配。</p><p>初始化值的个数不允许超过长度 <code>len</code>。当初始化值的个数小于 <code>len</code> 时，未被初始化的位置等于默认值 0。</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数组长度为 5，初始化了前两个数，未初始化的位是 0</span></span><br><span class="line">b := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125; </span><br><span class="line"><span class="keyword">for</span> index, val := <span class="keyword">range</span> b &#123;</span><br><span class="line">fmt.Printf(<span class="string">"下标 = %d, 值 = %d\n"</span>, index, val)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">下标 = 0, 值 = 1</span></span><br><span class="line"><span class="comment">下标 = 1, 值 = 2</span></span><br><span class="line"><span class="comment">下标 = 2, 值 = 0</span></span><br><span class="line"><span class="comment">下标 = 3, 值 = 0</span></span><br><span class="line"><span class="comment">下标 = 4, 值 = 0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>也可以使用 <code>{index1: a, index2: b}</code> 的方式初始化数组，指明数组的索引和对应的下标值，未指明的下标所在位置的值等于默认值 0：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过数组索引初始化</span></span><br><span class="line"><span class="comment">// d[0] = 1, d[2] = 3，其他位置等于 0</span></span><br><span class="line">d := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">0</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="number">3</span>&#125; </span><br><span class="line"><span class="keyword">for</span> index, val := <span class="keyword">range</span> d &#123;</span><br><span class="line">fmt.Printf(<span class="string">"下标 = %d, 值 = %d\n"</span>, index, val)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">下标 = 0, 值 = 1</span></span><br><span class="line"><span class="comment">下标 = 1, 值 = 0</span></span><br><span class="line"><span class="comment">下标 = 2, 值 = 3</span></span><br><span class="line"><span class="comment">下标 = 3, 值 = 0</span></span><br><span class="line"><span class="comment">下标 = 4, 值 = 0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="暗示数组长度"><a href="#暗示数组长度" class="headerlink" title="暗示数组长度"></a>暗示数组长度</h3><p>初始化时你也可以不直接指明数组的长度，而是使用 <code>[...]</code> 代替。和指明数组长度时相同，此时也可以使用顺序填写和指定索引两种方式来初始化数组。</p><p>当使用 <code>{a, b, c}</code> 方式传递初始化值时，Go 语言将<strong>通过初始化元素的个数来确定数组的长度</strong>：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过传递初始化值确定数组长度</span></span><br><span class="line"><span class="comment">// 传递了 5 个元素，数组长度为 5</span></span><br><span class="line">c := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;  </span><br><span class="line"><span class="keyword">for</span> index, val := <span class="keyword">range</span> c &#123;</span><br><span class="line">fmt.Printf(<span class="string">"下标 = %d, 值 = %d\n"</span>, index, val)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">下标 = 0, 值 = 1</span></span><br><span class="line"><span class="comment">下标 = 1, 值 = 2</span></span><br><span class="line"><span class="comment">下标 = 2, 值 = 3</span></span><br><span class="line"><span class="comment">下标 = 3, 值 = 4</span></span><br><span class="line"><span class="comment">下标 = 4, 值 = 5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>若通过指明数组的索引和对应的值来初始化数组，此时数组的长度就等于 <code>最大索引数 + 1</code>：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// 最大索引是 9，所以数组的长度为 10</span><br><span class="line">e := [...]int&#123;9: 10&#125; </span><br><span class="line">for index, val := range e &#123;</span><br><span class="line">fmt.Printf(&quot;下标 = %d, 值 = %d\n&quot;, index, val)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* Output:</span><br><span class="line">下标 = 0, 值 = 0</span><br><span class="line">下标 = 1, 值 = 0</span><br><span class="line">下标 = 2, 值 = 0</span><br><span class="line">下标 = 3, 值 = 0</span><br><span class="line">下标 = 4, 值 = 0</span><br><span class="line">下标 = 5, 值 = 0</span><br><span class="line">下标 = 6, 值 = 0</span><br><span class="line">下标 = 7, 值 = 0</span><br><span class="line">下标 = 8, 值 = 0</span><br><span class="line">下标 = 9, 值 = 10</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h2 id="数组的遍历"><a href="#数组的遍历" class="headerlink" title="数组的遍历"></a>数组的遍历</h2><p>在 Go 语言中使用 <code>for ... range</code> 遍历数组：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// i 是数组索引</span></span><br><span class="line"><span class="keyword">for</span> i, _ := <span class="keyword">range</span> arr1 &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数组是值类型"><a href="#数组是值类型" class="headerlink" title="数组是值类型"></a>数组是值类型</h2><p>和 C/C++ 不同，Go 语言的数组是<strong>值类型</strong>的。这样一来，<strong>赋值和传参都会复制整个数组，而不是指针</strong>。</p><p>我们初始化一个数组 <code>a</code>，并把它赋值给数组 <code>b</code>，然后打印两者的值与指针：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">a := [5]int&#123;1, 2, 3, 4, 5&#125;</span><br><span class="line">b := a</span><br><span class="line">fmt.Printf(&quot;数组 a - 值：%v，指针：%p\n&quot;, a, &amp;a)</span><br><span class="line">fmt.Printf(&quot;数组 b - 值：%v，指针：%p\n&quot;, b, &amp;b)</span><br><span class="line">/* Output:</span><br><span class="line">数组 a - 值：[1 2 3 4 5]，指针：0xc00001e0f0</span><br><span class="line">数组 b - 值：[1 2 3 4 5]，指针：0xc00001e120</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><p>可以看到，两者的值是相同的，但是内存地址却不同，说明<strong>在赋值的过程中复制了整个数组</strong>。</p><p>我们再来看一下传参的例子。</p><p>定义一个函数 <code>transmitA</code>，把刚才我们初始化的数组 <code>a</code> 传入：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">fmt.Printf(<span class="string">"数组 a - 值：%v，指针：%p\n"</span>, a, &amp;a)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把数组 a 传入函数</span></span><br><span class="line">transmitA(a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">transmitA</span><span class="params">(a [5]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"传入函数的数组 a - 值：%v，指针：%p\n"</span>, a, &amp;a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">数组 a - 值：[1 2 3 4 5]，指针：0xc00001e0f0</span></span><br><span class="line"><span class="comment">传入函数的数组 a - 值：[1 2 3 4 5]，指针：0xc00001e150</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>从输出可以看出，两者的值依然相同，内存地址却是不同的。这说明<strong>在传参时数组也被复制了</strong>。</p><h2 id="数组指针与指针数组"><a href="#数组指针与指针数组" class="headerlink" title="数组指针与指针数组"></a>数组指针与指针数组</h2><p>数组指针与指针数组听起来似乎有点拗口，那么来展开说明一下：</p><ul><li>数组指针：（指向）数组（的）指针</li><li>指针数组：（装满了）指针（的）数组</li></ul><p>也就是说，<strong>数组指针是个指针，它指向一个数组；而指针数组是个数组，它里面装满了指针</strong>。</p><h3 id="数组指针"><a href="#数组指针" class="headerlink" title="数组指针"></a>数组指针</h3><p>声明一个数组 <code>a</code>，然后将它的地址赋值给 <code>arrayPointer</code>。这样一来，<code>arrayPointer</code> 就是一个指向数组 <code>a</code> 的指针，即数组指针，它的类型为 <code>*[5]int</code>。</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">a := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="comment">// 把数组 a 的地址赋值给 arrayPointer</span></span><br><span class="line"><span class="comment">// arrayPointer 是指向数组的指针，类型为 *[5]int</span></span><br><span class="line">arrayPointer := &amp;a</span><br><span class="line">fmt.Println(arrayPointer)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">&amp;[1 2 3 4 5]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="指针数组"><a href="#指针数组" class="headerlink" title="指针数组"></a>指针数组</h3><p>初始化数组 <code>pointerArray</code>，传入的初始化值为整型 <code>m</code> 与 <code>n</code> 的内存地址（<code>&amp;m</code> 和 <code>&amp;n</code>），那么 <code>pointerArray</code> 就是一个装着 <code>int</code> 类型指针的数组，即指针数组，它的类型为 <code>[2]*int</code>。</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">m := <span class="number">1</span></span><br><span class="line">n := <span class="number">2</span></span><br><span class="line"><span class="comment">// 初始化 pointerArray，传入 m 与 n 的地址</span></span><br><span class="line"><span class="comment">// pointerArray 包含了整型地址，是一个装着指针的数组</span></span><br><span class="line">pointerArray := [<span class="number">2</span>]*<span class="keyword">int</span>&#123;&amp;m, &amp;n&#125;</span><br><span class="line">fmt.Println(pointerArray)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">[0xc0000aa000 0xc0000aa008]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>数组的长度是固定的，初始化时需要「明示」或「暗示」数组的长度</li><li><strong>数组的长度是数组类型的组成部分</strong>，<code>[2]int</code> 与 <code>[100]int</code> 是不同类型的数组</li><li>使用 <code>for ... range</code> 遍历数组</li><li>在 Go 语言中，数组是<strong>值类型</strong>，赋值和传递参数都会发生数组的复制</li><li>数组指针是一个指针，它指向了一个数组</li><li>指针数组是一个数组，它里面装着指针</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://github.com/qyuhen/book" target="_blank" rel="noopener">《Go 学习笔记》</a></li></ul><hr><p><img src="/img/qrcode/wechat.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      聊聊 Go 语言中的数组类型
    
    </summary>
    
      <category term="Web屠龙刀" scheme="http://jalan.space/categories/Web%E5%B1%A0%E9%BE%99%E5%88%80/"/>
    
    
      <category term="Go" scheme="http://jalan.space/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>聊聊 Go 语言中的字符表示与字符串遍历</title>
    <link href="http://jalan.space/2019/11/16/2019/go-character-string-range/"/>
    <id>http://jalan.space/2019/11/16/2019/go-character-string-range/</id>
    <published>2019-11-16T15:57:00.000Z</published>
    <updated>2019-11-21T13:29:18.484Z</updated>
    
    <content type="html"><![CDATA[<p>和其他语言不同，在 Go 语言中没有字符类型，<strong>字符只是整数的特殊用例</strong>。</p><p>为什么说<strong>字符只是整数的特殊用例</strong>呢？因为在 Go 中，用于表示字符的 <code>byte</code> 和 <code>rune</code> 类型都是<strong>整型的别名</strong>。在 Go 的源码中我们可以看到：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// byte is an alias for uint8 and is equivalent to uint8 in all ways. It is</span></span><br><span class="line"><span class="comment">// used, by convention, to distinguish byte values from 8-bit unsigned</span></span><br><span class="line"><span class="comment">// integer values.</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">byte</span> = <span class="keyword">uint8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// rune is an alias for int32 and is equivalent to int32 in all ways. It is</span></span><br><span class="line"><span class="comment">// used, by convention, to distinguish character values from integer values.</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">rune</span> = <span class="keyword">int32</span></span><br></pre></td></tr></table></figure><ul><li><code>byte</code> 是 <code>uint8</code> 的别名，长度为 1 个字节，用于表示 ASCII 字符</li><li><code>rune</code> 是 <code>int32</code> 的别名，长度为 4 个字节，用于表示以 UTF-8 编码的 Unicode 码点</li></ul><blockquote><p>Tips：Unicode 从 0 开始，为每个符号指定一个编号，这叫做「码点」（code point）。</p></blockquote><h2 id="字符的表示"><a href="#字符的表示" class="headerlink" title="字符的表示"></a>字符的表示</h2><p>那么，如何在 Go 语言中表示字符呢？</p><p>在 Go 语言中使用<strong>单引号包围</strong>来表示字符，例如 <code>&#39;j&#39;</code>。</p><h3 id="byte"><a href="#byte" class="headerlink" title="byte"></a>byte</h3><p>如果要表示 <code>byte</code> 类型的字符，可以使用 <code>byte</code> 关键字来指明字符变量的类型：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> byteC <span class="keyword">byte</span> = <span class="string">'j'</span></span><br></pre></td></tr></table></figure><p>又因为 <code>byte</code> 实质上是整型 <code>uint8</code>，所以可以直接转成整型值。在格式化说明符中我们使用 <code>%c</code> 表示字符，<code>%d</code> 表示整型：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 声明 byte 类型字符</span></span><br><span class="line"><span class="keyword">var</span> byteC <span class="keyword">byte</span> = <span class="string">'j'</span></span><br><span class="line">fmt.Printf(<span class="string">"字符 %c 对应的整型为 %d\n"</span>, byteC, byteC)</span><br><span class="line"><span class="comment">// Output: 字符 j 对应的整型为 106</span></span><br></pre></td></tr></table></figure><h3 id="rune"><a href="#rune" class="headerlink" title="rune"></a>rune</h3><p>与 <code>byte</code> 相同，想要声明 <code>rune</code> 类型的字符可以使用 <code>rune</code> 关键字指明：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> runeC <span class="keyword">rune</span> = <span class="string">'J'</span></span><br></pre></td></tr></table></figure><p><strong>但如果在声明一个字符变量时没有指明类型，Go 会默认它是 <code>rune</code> 类型</strong>：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">runeC := <span class="string">'J'</span></span><br><span class="line">fmt.Printf(<span class="string">"字符 %c 的类型为 %T\n"</span>, runeC, runeC)</span><br><span class="line"><span class="comment">// Output: 字符 J 的类型为 int32</span></span><br></pre></td></tr></table></figure><h2 id="为什么需要两种类型？"><a href="#为什么需要两种类型？" class="headerlink" title="为什么需要两种类型？"></a>为什么需要两种类型？</h2><p>看到这里你可能会问了，既然都用于表示字符，为什么还需要两种类型呢？</p><p>我们知道，<code>byte</code> 占用一个字节，因此它可以用于表示 ASCII 字符。<strong>而 UTF-8 是一种变长的编码方法，字符长度从 1 个字节到 4 个字节不等</strong>。<code>byte</code> 显然不擅长这样的表示，就算你想要使用多个 <code>byte</code> 进行表示，你也无从知晓你要处理的 UTF-8 字符究竟占了几个字节。</p><p>因此，如果你在中文字符串上狂妄地进行截取，一定会输出乱码：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">testString := <span class="string">"你好，世界"</span></span><br><span class="line">fmt.Println(testString[:<span class="number">2</span>]) <span class="comment">// 输出乱码，因为截取了前两个字节</span></span><br><span class="line">fmt.Println(testString[:<span class="number">3</span>]) <span class="comment">// 输出「你」，一个中文字符由三个字节表示</span></span><br></pre></td></tr></table></figure><p>此时就需要 <code>rune</code> 的帮助了。利用 <code>[]rune()</code> 将字符串转为 Unicode 码点再进行截取，这样就无需考虑字符串中含有 UTF-8 字符的情况了：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">testString := <span class="string">"你好，世界"</span></span><br><span class="line">fmt.Println(<span class="keyword">string</span>([]<span class="keyword">rune</span>(testString)[:<span class="number">2</span>])) <span class="comment">// 输出：「你好」</span></span><br></pre></td></tr></table></figure><blockquote><p>Tips：Unicode 和 ASCII 一样，是一种字符集，UTF-8 则是一种编码方式。</p></blockquote><h2 id="遍历字符串"><a href="#遍历字符串" class="headerlink" title="遍历字符串"></a>遍历字符串</h2><p>字符串遍历有两种方式，一种是下标遍历，一种是使用 <code>range</code>。</p><h3 id="下标遍历"><a href="#下标遍历" class="headerlink" title="下标遍历"></a>下标遍历</h3><p>由于在 Go 语言中，字符串以 UTF-8 编码方式存储，使用 <code>len()</code> 函数获取字符串长度时，获取到的是该 UTF-8 编码字符串的字节长度，<strong>通过下标索引字符串将会产生一个字节</strong>。因此，如果字符串中含有 UTF-8 编码字符，就会出现乱码：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">testString := <span class="string">"Hello，世界"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(testString); i++ &#123;</span><br><span class="line">c := testString[i]</span><br><span class="line">fmt.Printf(<span class="string">"%c 的类型是 %s\n"</span>, c, reflect.TypeOf(c))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">H 的类型是 uint8（ASCII 字符返回正常）</span></span><br><span class="line"><span class="comment">e 的类型是 uint8</span></span><br><span class="line"><span class="comment">l 的类型是 uint8</span></span><br><span class="line"><span class="comment">l 的类型是 uint8</span></span><br><span class="line"><span class="comment">o 的类型是 uint8</span></span><br><span class="line"><span class="comment">ï 的类型是 uint8（从这里开始出现了奇怪的乱码）</span></span><br><span class="line"><span class="comment">¼ 的类型是 uint8</span></span><br><span class="line"><span class="comment"> 的类型是 uint8</span></span><br><span class="line"><span class="comment">ä 的类型是 uint8</span></span><br><span class="line"><span class="comment">¸ 的类型是 uint8</span></span><br><span class="line"><span class="comment"> 的类型是 uint8</span></span><br><span class="line"><span class="comment">ç 的类型是 uint8</span></span><br><span class="line"><span class="comment"> 的类型是 uint8</span></span><br><span class="line"><span class="comment"> 的类型是 uint8</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="range"><a href="#range" class="headerlink" title="range"></a>range</h3><p><code>range</code> 遍历则会得到 <code>rune</code> 类型的字符：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">testString := <span class="string">"Hello，世界"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, c := <span class="keyword">range</span> testString &#123;</span><br><span class="line">fmt.Printf(<span class="string">"%c 的类型是 %s\n"</span>, c, reflect.TypeOf(c))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span></span><br><span class="line"><span class="comment">H 的类型是 int32</span></span><br><span class="line"><span class="comment">e 的类型是 int32</span></span><br><span class="line"><span class="comment">l 的类型是 int32</span></span><br><span class="line"><span class="comment">l 的类型是 int32</span></span><br><span class="line"><span class="comment">o 的类型是 int32</span></span><br><span class="line"><span class="comment">， 的类型是 int32</span></span><br><span class="line"><span class="comment">世 的类型是 int32</span></span><br><span class="line"><span class="comment">界 的类型是 int32</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>Go 语言中没有字符的概念，<strong>一个字符就是一堆字节</strong>，它可能是单个字节（ASCII 字符集），也有可能是多个字节（Unicode 字符集）</li><li><code>byte</code> 是 <code>uint8</code> 的别名，长度为 1 个字节，用于表示 ASCII 字符</li><li><code>rune</code> 则是 <code>int32</code> 的别名，长度为 4 个字节，用于表示以 UTF-8 编码的 Unicode 码点</li><li>字符串的截取是以字节为单位的</li><li>使用下标索引字符串会产生字节</li><li>想要遍历 <code>rune</code> 类型的字符则使用 <code>range</code> 方法进行遍历</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://www.ruanyifeng.com/blog/2014/12/unicode.html" target="_blank" rel="noopener">阮一峰: Unicode 与 JavaScript 详解</a></li><li><a href="https://blog.golang.org/strings" target="_blank" rel="noopener">The Go Blog - Strings, bytes, runes and characters in Go</a></li></ul><p><img src="/img/qrcode/wechat.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      实时同步其他远程仓库
    
    </summary>
    
      <category term="Web屠龙刀" scheme="http://jalan.space/categories/Web%E5%B1%A0%E9%BE%99%E5%88%80/"/>
    
    
      <category term="Go" scheme="http://jalan.space/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>在 Laravel 生产环境中填充数据</title>
    <link href="http://jalan.space/2019/10/27/2019/php-laravel-production-seed/"/>
    <id>http://jalan.space/2019/10/27/2019/php-laravel-production-seed/</id>
    <published>2019-10-27T13:32:00.000Z</published>
    <updated>2019-11-21T13:26:26.604Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Seeder is mainly to be used with test data。</p></blockquote><p>在 Laravel 中，我们常用 <a href="https://laravel.com/docs/5.8/seeding" target="_blank" rel="noopener">Database: Seeding</a> 操作填充测试数据，但在正式环境中使用 Seed 并不安全。</p><p>因为在测试环境中，无论运行多少次 <code>php artisan db:seed</code> 都无任何数据丢失的风险，而在正式环境中，这个操作<strong>一旦被执行就会被遗忘</strong>。所以，在生产环境中，我们选择使用<strong>迁移文件</strong>替代 Seed。</p><p>在迁移文件中，使用 <code>DB::table($tableName)-&gt;insert()</code> 方法来写入数据：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestTable</span> <span class="keyword">extends</span> <span class="title">Migration</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $tableName = <span class="string">'tests'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Run the migrations.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">up</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        DB::table(<span class="keyword">$this</span>-&gt;tableName)-&gt;insert([</span><br><span class="line">            [</span><br><span class="line">                <span class="string">'test'</span> =&gt; <span class="number">1</span>,</span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">                <span class="string">'test'</span> =&gt; <span class="number">2</span>,</span><br><span class="line">            ],</span><br><span class="line">        ]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Reverse the migrations.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">down</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样一来，一旦执行迁移文件，这次数据写入就会被记录到迁移记录中，防止下次重复执行。</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://stackoverflow.com/questions/21580088/laravel-migrations-seeding-for-production-data" target="_blank" rel="noopener">Laravel : Migrations &amp; Seeding for production data</a></li><li><a href="https://learnku.com/laravel/t/26049" target="_blank" rel="noopener">Laravel 数据填充（Seed）6 个小技巧分享</a></li></ul>]]></content>
    
    <summary type="html">
    
      Seed Or Migrate？
    
    </summary>
    
      <category term="Web屠龙刀" scheme="http://jalan.space/categories/Web%E5%B1%A0%E9%BE%99%E5%88%80/"/>
    
    
      <category term="PHP" scheme="http://jalan.space/tags/PHP/"/>
    
      <category term="Laravel" scheme="http://jalan.space/tags/Laravel/"/>
    
  </entry>
  
  <entry>
    <title>二零一九碎碎念</title>
    <link href="http://jalan.space/2019/10/23/2019/bibi/"/>
    <id>http://jalan.space/2019/10/23/2019/bibi/</id>
    <published>2019-10-23T13:41:00.000Z</published>
    <updated>2019-10-23T15:33:29.931Z</updated>
    
    <content type="html"><![CDATA[<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script><div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="薯条是？" />    <label for="pass">薯条是？</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">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</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      我与春风皆过客
    
    </summary>
    
      <category term="少年人的冲动" scheme="http://jalan.space/categories/%E5%B0%91%E5%B9%B4%E4%BA%BA%E7%9A%84%E5%86%B2%E5%8A%A8/"/>
    
    
      <category term="生活啊" scheme="http://jalan.space/tags/%E7%94%9F%E6%B4%BB%E5%95%8A/"/>
    
  </entry>
  
  <entry>
    <title>从购买云服务器到使用 Docker 部署个人相册</title>
    <link href="http://jalan.space/2019/10/15/2019/create-gallery-by-docker/"/>
    <id>http://jalan.space/2019/10/15/2019/create-gallery-by-docker/</id>
    <published>2019-10-15T15:52:00.000Z</published>
    <updated>2019-11-16T15:55:23.853Z</updated>
    
    <content type="html"><![CDATA[<p>今天看到朋友圈和技术群里都在刷腾讯云双十一优惠活动，服务器一年 88 RMB，午休的时候就下单买了一台。服务器配置为 1 核 2G，操作系统为 CentOS，跑一些小站足够使用。说来惭愧，这是我的第一台（购买的）私人服务器，之前都在薅羊毛中度过（假的服务端）。</p><p>正好这几天想搭建个人相册，看到了 <a href="https://github.com/litten/zing-gallery" target="_blank" rel="noopener">Zing Gallery</a> 的 Demo 十分喜欢，既然有了服务器，那就撸起袖子干吧！</p><h2 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h2><p>首先要在云服务器上安装 Docker 环境。</p><p>安装并运行 Docker：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ yum install docker-io –y</span><br><span class="line">$ systemctl start docker</span><br></pre></td></tr></table></figure><p>检查安装结果：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ docker info</span><br></pre></td></tr></table></figure><h2 id="修改项目"><a href="#修改项目" class="headerlink" title="修改项目"></a>修改项目</h2><p>先把 <a href="https://github.com/litten/zing-gallery" target="_blank" rel="noopener">Zing Gallery</a> Clone 到本地，按自己的需求修改配置并更换照片。根据其 README 可知：</p><ol><li>将照片放入 resources/photos 文件夹</li><li>执行命令 <code>npm i</code> 安装依赖</li><li>执行命令 <code>npm run start</code> 启动相册</li><li>项目的配置文件为 <em>config.js</em></li></ol><h2 id="项目容器化"><a href="#项目容器化" class="headerlink" title="项目容器化"></a>项目容器化</h2><p>因为要使用 Docker 部署，所以需要将项目容器化。</p><p>创建 <em>dockerfile</em>，配置如下：</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">8.11</span>.<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 工作目录</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="bash"><span class="comment"># 将文件拷贝至工作目录</span></span></span><br><span class="line"><span class="bash">COPY . /app</span></span><br><span class="line"><span class="bash"><span class="comment"># 安装依赖</span></span></span><br><span class="line"><span class="bash">RUN npm i</span></span><br><span class="line"><span class="bash"><span class="comment"># 暴露端口</span></span></span><br><span class="line"><span class="bash">EXPOSE 8080</span></span><br><span class="line"><span class="bash"><span class="comment"># 运行项目</span></span></span><br><span class="line"><span class="bash">CMD [<span class="string">"node"</span>, <span class="string">"app.js"</span>]</span></span><br></pre></td></tr></table></figure><p>再创建一个 <em>.dockerignore</em> 文件用于忽略不必要的文件：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">node_modules</span><br><span class="line">npm-debug.log</span><br></pre></td></tr></table></figure><h2 id="创建镜像"><a href="#创建镜像" class="headerlink" title="创建镜像"></a>创建镜像</h2><p>在项目根目录下使用 <code>docker build</code> 创建镜像。假设给它起名为 <code>hello-gallery</code>：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker build -t hello-gallery .</span><br></pre></td></tr></table></figure><p>build 成功后会在本地生成一个 <code>hello-gallery:lastest</code> 镜像。</p><h2 id="上传镜像"><a href="#上传镜像" class="headerlink" title="上传镜像"></a>上传镜像</h2><p>我们已经在本地完成了镜像的创建，要怎么把它部署到服务器上呢？我们需要一个镜像仓库，把本地的镜像 push 上去，再在服务器上 pull 下来。这里我选择的是 <a href="https://hub.qiniu.com/portal/home" target="_blank" rel="noopener">七牛云镜像仓库</a>。</p><p>在 push 镜像前需要先登录镜像仓库：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker login -u username -p password</span><br></pre></td></tr></table></figure><p>然后使用 <code>docker tag</code> 修改镜像名称，名称需要包含对应镜像仓库的域名：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker tag hello-gallery reg.qiniu.com/gallery/time:v1.0.0</span><br></pre></td></tr></table></figure><p>改好名称后就可以执行 push 操作了：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker push reg.qiniu.com/gallery/time:v1.0.0</span><br></pre></td></tr></table></figure><p>push 成功后，我们就能在服务器上 pull：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker pull reg.qiniu.com/gallery/time:v1.0.0</span><br></pre></td></tr></table></figure><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>我们已经在服务器上成功 pull 了镜像文件，现在让它跑起来！</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run -p 8081:8080 reg.qiniu.com/gallery/time:v1.0.0</span><br></pre></td></tr></table></figure><p>这里对外暴露了 <code>8081</code> 端口，使用 <code>ip:8081</code> 即可访问，👉<a href="http://115.159.158.236:8081/" target="_blank" rel="noopener">戳这里这里</a>。</p><hr><p>因为域名绑定的手机号已经更换了，暂时没有办法绑定域名，后面再做一下域名绑定与持续集成吧。</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://help.aliyun.com/document_detail/51853.html" target="_blank" rel="noopener">ECS上搭建Docker（CentOS7）</a></li><li><a href="https://nodejs.org/zh-cn/docs/guides/nodejs-docker-webapp/" target="_blank" rel="noopener">把一个 Node.js web 应用程序给 Docker 化</a></li></ul>]]></content>
    
    <summary type="html">
    
      Powered by Zing Gallery.
    
    </summary>
    
      <category term="Web屠龙刀" scheme="http://jalan.space/categories/Web%E5%B1%A0%E9%BE%99%E5%88%80/"/>
    
    
      <category term="Docker" scheme="http://jalan.space/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>在 macOS 上使用 Docker Desktop 启动 Kubernetes</title>
    <link href="http://jalan.space/2019/09/22/2019/mac-docker-desktop-kubernetes/"/>
    <id>http://jalan.space/2019/09/22/2019/mac-docker-desktop-kubernetes/</id>
    <published>2019-09-22T12:27:00.000Z</published>
    <updated>2019-09-22T15:38:25.265Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h2><p>下载 <a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">Docker Desktop</a> 按提示进行安装。</p><h2 id="安装-Kubernetes"><a href="#安装-Kubernetes" class="headerlink" title="安装 Kubernetes"></a>安装 Kubernetes</h2><p>点击 Docker 图标，选择 <em>Preferences… &gt; Kubernetes</em> 进入 Kubernetes 配置页：</p><p><img src="/img/in-post/mac-k8s/k8s-page.png" alt="Kubernetes 配置页"></p><p>然后勾选 <em>Enable Kubernetes</em>，点击下方 <em>Apply</em> 按钮，启动 Kubernetes。</p><h3 id="踩坑一：Kubernetes-is-starting"><a href="#踩坑一：Kubernetes-is-starting" class="headerlink" title="踩坑一：Kubernetes is starting"></a>踩坑一：Kubernetes is starting</h3><p>这样就大功告成了？往往事情并不会这么顺利。由于众所周知的原因，启动 Kubernetes 所需的镜像往往会下载失败，于是点击 <em>Apply</em> 后，该配置页面的右下角始终显示 <em>Kubernetes is starting</em>，无法正常启动。</p><p><a href="https://github.com/maguowei/k8s-docker-desktop-for-mac" target="_blank" rel="noopener">Docker Desktop for Mac 开启并使用 Kubernetes</a> 为该问题提供了解决方案。</p><p>我们先将该仓库拉取到本地：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone git@github.com:maguowei/k8s-docker-desktop-for-mac.git</span><br></pre></td></tr></table></figure><p>然后确认一下 Docker Desktop 自带的 Kubernetes 的版本。点击 Docker 图标，选择 <em>About Docker Desktop</em>，看到如下界面：</p><p><img src="/img/in-post/mac-k8s/about-docker-desktop.png" alt="About Docker Desktop"></p><p>可以看到 Kubernetes 的版本是 v1.14.6。</p><p>之后我们打开 k8s-docker-desktop-for-mac 项目下的 <em>images</em> 文件：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cat images</span><br><span class="line">k8s.gcr.io/kube-proxy:v1.14.6=gotok8s/kube-proxy:v1.14.6</span><br><span class="line">k8s.gcr.io/kube-controller-manager:v1.14.6=gotok8s/kube-controller-manager:v1.14.6</span><br><span class="line">k8s.gcr.io/kube-scheduler:v1.14.6=gotok8s/kube-scheduler:v1.14.6</span><br><span class="line">k8s.gcr.io/kube-apiserver:v1.14.6=gotok8s/kube-apiserver:v1.14.6</span><br><span class="line">k8s.gcr.io/coredns:1.3.1=gotok8s/coredns:1.3.1</span><br><span class="line">k8s.gcr.io/pause:3.1=gotok8s/pause:3.1</span><br><span class="line">k8s.gcr.io/etcd:3.3.10=gotok8s/etcd:3.3.10</span><br></pre></td></tr></table></figure><p>确保文件中的 Kubernetes 版本号与 Docker Desktop 自带的 Kubernetes 版本号一致后，执行命令：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./load_images.sh</span><br></pre></td></tr></table></figure><p>该命令会帮助我们拉取启动 Kubernetes 所需的所有镜像。命令执行完毕后，点击 Docker 图标，在 <em>Preferences.. &gt; Reset</em> 界面中点击 <em>Reset Kubernetes cluster</em>，重启 Kubernetes。大功告成！</p><h3 id="踩坑二：unexpected-EOF"><a href="#踩坑二：unexpected-EOF" class="headerlink" title="踩坑二：unexpected EOF"></a>踩坑二：unexpected EOF</h3><p>执行 kubectl 命令时出现报错：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Unable to connect to the server: unexpected EOF</span><br></pre></td></tr></table></figure><p>在 Github 上摸到了一个相关的 Issue：<a href="https://github.com/docker/for-mac/issues/2717" target="_blank" rel="noopener">Kubernetes on Mac is stuck very often. Needs restart all the time</a>。</p><p>最终的解决方案是在 <em>Advanced</em> 配置界面中将 <em>Memory</em> 调大，然后重启 Docker。</p><p><img src="/img/in-post/mac-k8s/advanced-page.png" alt="Advanced"></p><h2 id="切换-Kubernetes-集群"><a href="#切换-Kubernetes-集群" class="headerlink" title="切换 Kubernetes 集群"></a>切换 Kubernetes 集群</h2><p>由于可能会存在多个集群，我们需要把集群切换为 Docker Desktop 所带的集群。</p><p>先看下有哪些集群：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl config get-contexts</span><br></pre></td></tr></table></figure><p>切换集群：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl config use-context docker-for-desktop</span><br></pre></td></tr></table></figure><h2 id="安装-Dashboard"><a href="#安装-Dashboard" class="headerlink" title="安装 Dashboard"></a>安装 Dashboard</h2><p><a href="https://github.com/kubernetes/dashboard" target="_blank" rel="noopener">Kubernetes Dashboard</a> 是 Kubernetes 集群可视化的仪表盘。</p><p>一般来说我们直接通过一行 kubectl 命令进行安装就好了：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml</span><br></pre></td></tr></table></figure><p>但由于众所周知的原因，镜像还是会下载失败，pod 始终显示 <em>ImagePullBackOff</em>。这需要我们手动拉取所需镜像。</p><h3 id="下载-yaml-文件"><a href="#下载-yaml-文件" class="headerlink" title="下载 yaml 文件"></a>下载 yaml 文件</h3><p>先把 yaml 配置文件下载下来：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ curl -O https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml</span><br></pre></td></tr></table></figure><h3 id="查看镜像版本"><a href="#查看镜像版本" class="headerlink" title="查看镜像版本"></a>查看镜像版本</h3><p>查看 yaml 文件中的镜像版本：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cat kubernetes-dashboard.yaml | grep kubernetes-dashboard</span><br></pre></td></tr></table></figure><p>这是我们需要的信息：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- name: kubernetes-dashboard</span><br><span class="line">  image: k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1</span><br></pre></td></tr></table></figure><p>可以看到镜像版本为 v1.10.1。</p><h3 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h3><p>使用 <code>docker pull</code> 手动拉取镜像：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ docker pull gcrxio/kubernetes-dashboard-amd64:v1.10.1</span><br></pre></td></tr></table></figure><p>使用 <code>docker tag</code> 修改镜像名称，让镜像名与配置文件中的镜像名保持一致：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ docker tag gcrxio/kubernetes-dashboard-amd64:v1.10.1 k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1</span><br></pre></td></tr></table></figure><p>这样一来，配置文件所需要的镜像就已经下载到本地了。</p><h3 id="修改镜像获取策略"><a href="#修改镜像获取策略" class="headerlink" title="修改镜像获取策略"></a>修改镜像获取策略</h3><p>但由于配置文件默认的镜像拉取方式还是从远程拉取，于是我们要在配置文件中 <code>image: k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1</code> 一行后添加：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">imagePullPolicy: IfNotPresent</span><br></pre></td></tr></table></figure><h3 id="重新安装-Dashboard"><a href="#重新安装-Dashboard" class="headerlink" title="重新安装 Dashboard"></a>重新安装 Dashboard</h3><p>如果刚才你已经执行了：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml</span><br></pre></td></tr></table></figure><p>那么先把这个启动的 pod 删除：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ kubectl delete -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml</span><br></pre></td></tr></table></figure><p>接着使用我们修改过的配置文件重新安装 Dashboard：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ kubectl delete -f kubernetes-dashboard.yaml</span><br></pre></td></tr></table></figure><h3 id="启动-Dashboard-并访问"><a href="#启动-Dashboard-并访问" class="headerlink" title="启动 Dashboard 并访问"></a>启动 Dashboard 并访问</h3><p>使用 kubectl 命令启动 Dashboard：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ kubectl proxy</span><br></pre></td></tr></table></figure><p>启动成功后，可以通过该地址进行访问 Dashboard：</p><p><a href="http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/" target="_blank" rel="noopener">http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/</a></p><p>进入 Dashboard 需要令牌，可以通过以下命令获取令牌：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ kubectl -n kube-system describe secret default| awk &apos;$1==&quot;token:&quot;&#123;print $2&#125;&apos;</span><br></pre></td></tr></table></figure><p><img src="/img/in-post/mac-k8s/dashboard.png" alt="Dashboard"></p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://github.com/kubernetes/dashboard" target="_blank" rel="noopener">Github: Kubernetes Dashboard</a></li><li><a href="https://github.com/docker/for-mac/issues/2379" target="_blank" rel="noopener">Issue: <code>kubectl version</code> can’t connect to local k8s master</a></li><li><a href="https://www.jianshu.com/p/073577bdec98" target="_blank" rel="noopener">[k8s]kubernetes安装dashboard步骤</a></li><li><a href="https://www.cnblogs.com/luoluoshidafu/p/11214456.html" target="_blank" rel="noopener">如何启动mac版docker自带的k8s</a></li></ul>]]></content>
    
    <summary type="html">
    
      安装 Kubernetes 与 Dashboard 踩坑全记录
    
    </summary>
    
      <category term="云原生应用" scheme="http://jalan.space/categories/%E4%BA%91%E5%8E%9F%E7%94%9F%E5%BA%94%E7%94%A8/"/>
    
    
      <category term="Kubernetes" scheme="http://jalan.space/tags/Kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>从 UITableView 中删除 Cell 的踩坑</title>
    <link href="http://jalan.space/2019/09/19/2019/swift-tableview-delete-cell/"/>
    <id>http://jalan.space/2019/09/19/2019/swift-tableview-delete-cell/</id>
    <published>2019-09-19T12:49:00.000Z</published>
    <updated>2019-09-19T14:58:48.061Z</updated>
    
    <content type="html"><![CDATA[<p>使用 <code>deleteRows</code> 从 UITableView 中移除 Cell 时发生如下报错：</p><blockquote><p>‘NSInternalInconsistencyException’, reason: ‘Invalid update: invalid number of rows in section 0.  The number of rows contained in an existing section after the update (3) must be equal to the number of rows contained in that section before the update (3), plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).’</p></blockquote><p>报错的意思就是：执行 <code>deleteRows</code> 后，用于 Cell 显示的数据依然是 3 条。所以正确的顺序应该是：</p><ol><li>从数据源中删除一条数据</li><li>执行 <code>deleteRows</code></li></ol><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath)</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> editingStyle == .delete &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Deleted"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.catNames.remove(at: indexPath.row)</span><br><span class="line">    <span class="keyword">self</span>.tableView.deleteRows(at: [indexPath], with: .automatic)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://stackoverflow.com/questions/40156274/deleting-a-row-from-a-uitableview-in-swift-3" target="_blank" rel="noopener">Deleting a Row from a UITableView in Swift 3?</a></li></ul>]]></content>
    
    <summary type="html">
    
      Deleting a Row from a UITableView in Swift.
    
    </summary>
    
      <category term="跨过这道坎" scheme="http://jalan.space/categories/%E8%B7%A8%E8%BF%87%E8%BF%99%E9%81%93%E5%9D%8E/"/>
    
    
      <category term="Swift" scheme="http://jalan.space/tags/Swift/"/>
    
      <category term="iOS" scheme="http://jalan.space/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>2019 谷歌开发者大会之我见</title>
    <link href="http://jalan.space/2019/09/12/2019/google-developer-days/"/>
    <id>http://jalan.space/2019/09/12/2019/google-developer-days/</id>
    <published>2019-09-12T10:07:00.000Z</published>
    <updated>2019-09-13T04:50:03.709Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/img/in-post/2019-gdd/begin.jpeg" alt="2019.09.10 摄于上海世博中心 GDD 开幕主旨演讲"></p><p>今年有幸被谷歌开发者大会组委会抽中，成为拥有入场资格的嘉宾之一。9.9 晚，我从深圳飞往上海。这是我第一次来到上海这座城市，也是我第一次参加开发者大会。</p><p>两天的时间里收获颇多，下面说说我在这两天中印象最为深刻的经历以及我个人的一些想法。</p><h2 id="艺术与文化"><a href="#艺术与文化" class="headerlink" title="艺术与文化"></a>艺术与文化</h2><p><img src="/img/in-post/2019-gdd/culture.jpg" alt=""></p><h3 id="观妙中国"><a href="#观妙中国" class="headerlink" title="观妙中国"></a>观妙中国</h3><blockquote><p>谷歌艺术与文化团队携手中国超过 30 家博物馆及艺术文化机构，用科技和创意让身在不同角落的每一位艺术和文化的爱好者都可以随时随地在线上欣赏珍贵的艺术品和历史文物，体会每一件珍品背后引人入胜的故事。</p></blockquote><p>2018 GDD 开场时展示的是「猜画小歌」，今年的则是「观秒中国」。你可以在「观妙中国」上「近距离」看到很多在现实生活中需要「跑断腿」才能看到的艺术作品，你可以将这些作品放大，甚至可以看清它的纹理细节。</p><p>这款 APP 提供三个功能：</p><ol><li>放大欣赏超高清图片：细观中国艺术瑰宝。</li><li>虚拟实境游览：足不出户，探索中国最顶尖的博物馆和最热门的艺术地标。</li><li>在线展览：随时随地欣赏由专家打造的精彩展览。</li></ol><p>不是每个人都有精力去各个地方的博物馆，这款 APP 把艺术作品线上化，方便大家了解艺术，也利于中国艺术的宣传。</p><h3 id="TensorFlow-与中国传统文化的结合"><a href="#TensorFlow-与中国传统文化的结合" class="headerlink" title="TensorFlow 与中国传统文化的结合"></a>TensorFlow 与中国传统文化的结合</h3><p>体验区有 3 个与 AI 结合的艺术文化体验项目：</p><ol><li>智玩皮影：手影比划，识别成功的手影会转为动画。</li><li>智绘甲骨：绘制甲骨文，识别成功后绘制的甲骨文会变成动画，展示在屏幕上。</li><li>智窑舞变：比划动作，根据动作产生的不同体型特征，屏幕上的瓷器会展现为不同形态。</li></ol><p>第一天排队的人实在太多了，第二天我才把所有项目都体验完。其中「智绘甲骨」我觉得最为有趣了，大屏幕上都是大家画的猴子、大象等动物在跑来跑去。🌝</p><p><img src="/img/in-post/2019-gdd/jiagu.webp" alt="智绘甲骨 - 图片来自谷歌开发者知乎回答"></p><h2 id="职业发展课"><a href="#职业发展课" class="headerlink" title="职业发展课"></a>职业发展课</h2><p>GDD 今年的一大主题是「Women Will」，在大门口也能看到一个女装安卓机器人。今年的 GDD 大会开展了两个全球性项目：</p><ol><li><code>#IamRemarkable</code> 职业发展课程</li><li>女性开发者专题讨论会</li></ol><p>由于参加 Codelabs，我很遗憾错过了 <code>#IamRemarkable</code> 职业发展课程。</p><p>「女性开发者专题讨论会」的议程标题是「挖掘事业发展潜力 - 开拓自己的道路」，大会邀请了 4 位谷歌内外的行业女性领军人物，和大家一起探讨职业发展上会遇到的困惑。</p><h3 id="如何在职业上获得上升机会？"><a href="#如何在职业上获得上升机会？" class="headerlink" title="如何在职业上获得上升机会？"></a>如何在职业上获得上升机会？</h3><p>不需要特意去做什么，但要有<strong>专注度</strong>和<strong>责任心</strong>。</p><ul><li>经常问自己：为什么要这样做？如果重新做要怎么做？并且在反思后把事情做好。</li><li>每个人都要有企业家精神：企业家和打工者的区别是<strong>主动性</strong>。企业家主动为自己做事，打工者被动为别人打工。</li></ul><h3 id="Technical-Or-Manager-如何选择？"><a href="#Technical-Or-Manager-如何选择？" class="headerlink" title="Technical Or Manager 如何选择？"></a>Technical Or Manager 如何选择？</h3><ul><li>两者没有谁好谁坏，都只是个人的选择不同。</li><li>两者也并非完全割裂，也存在「Technical Leader Manager」这样的职位。</li><li>就算不是 Manager，没有直接管理别人的能力，但也要影响别人、说服别人。</li><li>任何决定都遵循「最小后悔原则」。做这件事我的后悔度是否最小？我是否能接受最坏的打算？想清楚后 Enjoy！</li><li>要趁年轻尽快了解自己，发掘自己的兴趣点。如果感兴趣就要去尝试，多发现自己的可能性。</li><li>自己的能力我们经常无法主观看见，也要多询问他人意见。</li></ul><h3 id="如何在工作-创业中保持长久的热情？"><a href="#如何在工作-创业中保持长久的热情？" class="headerlink" title="如何在工作/创业中保持长久的热情？"></a>如何在工作/创业中保持长久的热情？</h3><p>保持<strong>初心</strong>与<strong>好奇心</strong>，保持<strong>使命感</strong>与<strong>责任感</strong>。</p><ol><li>对世界的好奇心</li><li>对能力的好奇心（自己的能力边界在哪里？）</li></ol><blockquote><p>Computer Science 是最让人兴奋的产业！</p></blockquote><h3 id="Work-Life-Balance"><a href="#Work-Life-Balance" class="headerlink" title="Work Life Balance"></a>Work Life Balance</h3><p>达到 Balance 需要：</p><ol><li>自律</li><li>专注</li><li>学习</li></ol><blockquote><p>大家走得慢一点没有关系，但只要往前走就可以走得很远。</p></blockquote><h3 id="关于女性和男性的自信心对比问题"><a href="#关于女性和男性的自信心对比问题" class="headerlink" title="关于女性和男性的自信心对比问题"></a>关于女性和男性的自信心对比问题</h3><p>主持人的问题大意是：有一些岗位的要求，如果男性觉得自己 match 了 50% 就回去尝试，但女性觉得自己 match 了 90% 才会去尝试，怎么看待这个现象？或者自己的身上是否也有出现这样的现象？</p><ul><li>大家需要 build 自己的自信心。</li><li>能力提升后要懂得去抓住机会。</li><li>表达自己的做事过程，从而让别人发现你的潜力。</li></ul><h2 id="Flutter"><a href="#Flutter" class="headerlink" title="Flutter"></a>Flutter</h2><p><img src="/img/in-post/2019-gdd/flutter.png" alt=""></p><p>在本次 GDD 上 Google 正式发布了 Flutter 1.9。</p><p>只用 Flutter 运行过”Hello world!”的我对它还没有什么深刻的体验。但在这次 GDD 的 Flutter 介绍和各企业的 Flutter 案例分享中，我深刻体会到了：<strong>这确实是大势所趋</strong>。</p><p>也不是说原生客户端开发没落了，但如果你是一个客户端开发者，你可能真的要学一下 Flutter 了，因为越来越多的中国公司都开始使用这项技术来开发自己的产品。</p><h2 id="Google-Cloud"><a href="#Google-Cloud" class="headerlink" title="Google Cloud"></a>Google Cloud</h2><p><img src="/img/in-post/2019-gdd/google-cloud.png" alt=""></p><h3 id="GCP-基础介绍"><a href="#GCP-基础介绍" class="headerlink" title="GCP 基础介绍"></a>GCP 基础介绍</h3><p>主要是 GCP（Google Cloud Platform）上一些基础服务的介绍，以及如何根据自己的需求选择服务类型。</p><ul><li>GCE（Google Compute Engine）：用 Google 的服务器运行 Linux 虚拟机，启动、加载只需 10 秒。</li><li>Cloud Storage：文件存储到云。</li><li>Cloud SQL：关系型数据库服务（MySQL、PostgreSQL ……）。</li><li>NoSQL：JSON 结构，无 Schema。</li><li>云原生环境：<ul><li>GKE（Google Kubernetes Engine）：Google 的 K8s 服务。</li><li>Cloud Functions：事件驱动型无服务器计算平台。</li><li>Cloud Run（测试版）：在全托管式环境或您自己的 GKE 集群中运行无状态 HTTP 容器。</li></ul></li></ul><h3 id="打破圆周率世界纪录"><a href="#打破圆周率世界纪录" class="headerlink" title="打破圆周率世界纪录"></a>打破圆周率世界纪录</h3><blockquote><p>每年的 3 月 14 日，又被称为 Pi Day。在今年的这一天，谷歌宣布他们把圆周率 π 计算到了 31.4 万亿个小数位，准确的说是 31,415,926,535,897 个小数位，打破了吉尼斯世界纪录。<br>圆周率Pi是圆的周长与直径的比值，上一个纪录是 22.4 万亿个小数位，是由 Peter Trueb 在 2016 年创造。<br>完成这一纪录的是谷歌的日本女员工 Emma Haruka Iwao，她使用的计算圆周率的软件叫做 y-cruncher。通过 Google Cloud 的 25 台 Compute Engine 虚拟机节点，从去年 9 月到今年 1 月，共计算了 111.8 天，得出了这样的结果。在计算过程，Google Cloud 不间断地执行了数千次实时迁移，但对计算没有产生影响。</p></blockquote><p>相关新闻：<a href="https://www.bnext.com.tw/article/52576/google-employee-breaks-world-record-for-pi-digits" target="_blank" rel="noopener">Google展現雲端運算能力：算出圓周率小數點後第31.4兆進位，產出170TB數據</a>。</p><p><img src="/img/in-post/2019-gdd/pi-talk.jpeg" alt="我们如何打破圆周率计算位数世界纪录（精确到小数点后 31.4 万亿位！）"></p><p>打破这个世界纪录是 Google Cloud 算力和稳定性的体现。这也是首次利用云技术计算圆周率。</p><p>除此之外，Emma 还在 Talk 中分享了自己的经历：</p><ul><li>她在日本大阪出生长大，11 岁开始编程，但数学成绩一直不好，中学老师建议她去学文科。</li><li>上大学时学的是教育学，一年后教授觉得她对编程更感兴趣，于是建议她转专业去学习计算机，这也是她一生中做的最正确的决定。</li><li>她觉得自己不是「优秀」的软件工程师。</li><li>她面试了 5 次 Google，前 4 次以失败告终。</li><li>她从来没有想到她会打破这项世界纪录。</li></ul><p>Emma 的分享振奋人心。我一直觉得自己是一个笨拙的开发者，但或许只要足够努力，就能像 Emma 所说：「一个没有超级计算机的少年也能实现自己的梦想」。</p><p>Talk 结束后，我去 2 层的体验区进行了「8 秒速记圆周率，15 秒输入背诵数字」的挑战，最终在排行榜上留下了自己的名字~</p><p><img src="/img/in-post/2019-gdd/pi-c.jpeg" alt="第三名是我！"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>谷歌大中华区总裁陈俊廷在开场时说：</p><blockquote><p>我们最想看到的是开发者的笑脸。</p></blockquote><p>而这次 GDD 大会上 Google 所展示的东西也确实如此，他们一直在致力于让开发者更便捷地开发，更享受开发的过程，从而带给全人类更好的应用体验。Grow With Google 计划也让人印象深刻，致力于「让更多人在数字时代站稳脚跟」。</p><p>与一些传统技艺不同，Computer Science 是一个新兴领域，从图灵模型的提出到如今只有 82 年的时间，而中国互联网的兴起不过是近 20 年的事情。因此，我们面临着很多机遇，同时也面临着很多挑战。或许和国外的技术相比，中国仍落于人后，但中国开发者也始终在不断创新、不断挑战自我。前几天我在 <a href="https://github.com/xitu/gold-miner" target="_blank" rel="noopener">掘金翻译计划</a> 校对文章时看到了一句话，适用于此：</p><blockquote><p>I’m nowhere near the level of competency I want to be, but I’ve definitely come a long way since I started. :)</p></blockquote><p><strong>我远没有达到我想要的水平，但我知道，当我启程时便注定路远迢迢。:)</strong></p><p>感谢陪伴，期待下次相遇！祝大家月饼节快乐~🥮🎉</p><p><img src="/img/in-post/2019-gdd/thanks.jpeg" alt="纪念品们"></p><h2 id="扩展阅读"><a href="#扩展阅读" class="headerlink" title="扩展阅读"></a>扩展阅读</h2><ul><li><a href="https://github.com/flutter/flutter/wiki/Release-Notes-Flutter-1.9.1" target="_blank" rel="noopener">Flutter 1.9 特性</a></li><li><a href="https://developers.google.com/ar/discover/concepts?hl=zh-cn" target="_blank" rel="noopener">ARCore 介绍</a></li><li><a href="https://www.pocket-lint.com/phones/news/google/146782-android-q-release-date-news-features" target="_blank" rel="noopener">Android 10 features, news, and release date</a></li></ul>]]></content>
    
    <summary type="html">
    
      2019 Google Developer Days (GDD) 见闻
    
    </summary>
    
      <category term="少年人的冲动" scheme="http://jalan.space/categories/%E5%B0%91%E5%B9%B4%E4%BA%BA%E7%9A%84%E5%86%B2%E5%8A%A8/"/>
    
    
      <category term="生活啊" scheme="http://jalan.space/tags/%E7%94%9F%E6%B4%BB%E5%95%8A/"/>
    
      <category term="开发者大会" scheme="http://jalan.space/tags/%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E4%BC%9A/"/>
    
  </entry>
  
  <entry>
    <title>谈谈堆和栈</title>
    <link href="http://jalan.space/2019/09/08/2019/computer-stack-heap/"/>
    <id>http://jalan.space/2019/09/08/2019/computer-stack-heap/</id>
    <published>2019-09-08T07:28:00.000Z</published>
    <updated>2019-09-09T01:31:59.014Z</updated>
    
    <content type="html"><![CDATA[<p>说起「堆」和「栈」，我们一般都会想到它们是一种数据结构，具有 xxx 的特性。然而，除此之外，它们在计算机的内存中也扮演着不同的角色。</p><h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h3 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h3><ul><li>一种特殊的、基于树的数据结构</li><li>通常可以有两种类型：<ol><li>最大堆：根结点的键值是所有堆结点键值中最大者的堆</li><li>最小堆：根结点的键值是所有堆结点键值中最小者的堆</li></ol></li></ul><p><img src="/img/in-post/stack-heap/heap.png" alt="堆 - Heap"></p><h3 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h3><ul><li>一种线性的数据结构</li><li>遵循执行操作的特定顺序：<strong>后进先出</strong>（FIFO）</li></ul><p><img src="/img/in-post/stack-heap/stack.png" alt="栈 - Stack"></p><h2 id="内存的用途"><a href="#内存的用途" class="headerlink" title="内存的用途"></a>内存的用途</h2><p>内存的用途可以大致分为四个方面：</p><ol><li>代码区：放置二进制代码</li><li>数据区：用于存储全局变量等</li><li>堆区</li><li>栈区</li></ol><h3 id="堆区"><a href="#堆区" class="headerlink" title="堆区"></a>堆区</h3><p>堆是为<strong>动态分配</strong>预留的内存空间。</p><p>和栈不一样，从堆上分配和重新分配块没有固定模式，你可以在任何时候分配和释放它。</p><p>堆包含一个<strong>链表</strong>来维护已用和空闲的内存块。在堆上新分配（用 new 或者 malloc）内存是从空闲的内存块中找到一些满足要求的合适块。这个操作会更新堆中的块链表。这些元信息也存储在堆上，经常在每个块的头部一个很小区域。</p><h3 id="栈区"><a href="#栈区" class="headerlink" title="栈区"></a>栈区</h3><p>栈是为<strong>执行线程</strong>留出的内存空间。</p><ol><li>当函数被调用的时：系统栈会为这个函数开辟一个新的栈帧（包含局部变量、函数参数、返回值等），并把它压入栈中。这个栈帧中的内存空间被它所属的函数独占，正常情况下是不会和别的函数共享。</li><li>当函数执行完毕时：系统栈会弹出该函数所对应的栈帧。</li></ol><p>举个例子：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">A</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    B()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">B</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    A()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><code>main()</code> 函数开始执行：将自己的栈帧压入栈</li><li><code>main()</code> 函数调用函数 <code>A()</code>：将函数 <code>A()</code> 的栈帧压入栈</li><li><code>A()</code> 函数调用函数 <code>B()</code>：将函数 <code>B()</code> 的栈帧压入栈</li><li><code>B()</code> 函数执行完毕，从栈顶弹出 <code>B()</code> 的栈帧，此时 <code>A()</code> 的栈帧被暴露在栈顶，处理器能根据其中的返回地址跳回 <code>A()</code> 的代码区继续执行代码</li><li><code>A()</code> 函数执行完毕，从栈顶弹出 <code>A()</code> 的栈帧，此时 <code>main()</code> 函数的栈帧被暴露在栈顶，处理器根据其中的返回地址跳回 <code>main()</code> 的代码区继续指定代码</li></ol><p>栈要受到<strong>内存块的限制</strong>，不断的函数嵌套/为局部变量分配太多的空间，可能会导致栈溢出。也就是我们常说“递归导致栈溢出”的原因了。</p><h2 id="参考资料与扩展阅读"><a href="#参考资料与扩展阅读" class="headerlink" title="参考资料与扩展阅读"></a>参考资料与扩展阅读</h2><ul><li><a href="https://www.geeksforgeeks.org/stack-data-structure/" target="_blank" rel="noopener">Stack Data Structure</a></li><li><a href="https://www.geeksforgeeks.org/heap-data-structure/" target="_blank" rel="noopener">Heap Data Structure</a></li><li><a href="https://github.com/selfboot/CS_Offer/blob/master/Linux_OS/StackHeap.md" target="_blank" rel="noopener">堆和栈</a></li><li><a href="https://www.jianshu.com/p/ffe303d96dbd" target="_blank" rel="noopener">一篇文章搞定堆栈原理</a></li></ul>]]></content>
    
    <summary type="html">
    
      Stack &amp; Heap
    
    </summary>
    
      <category term="技多不压身" scheme="http://jalan.space/categories/%E6%8A%80%E5%A4%9A%E4%B8%8D%E5%8E%8B%E8%BA%AB/"/>
    
    
      <category term="数据结构" scheme="http://jalan.space/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>【译】如何杀死一个进程和它的所有子进程</title>
    <link href="http://jalan.space/2019/08/31/2019/translate-killing-a-process-and-all-of-its-descendants/"/>
    <id>http://jalan.space/2019/08/31/2019/translate-killing-a-process-and-all-of-its-descendants/</id>
    <published>2019-08-31T14:59:00.000Z</published>
    <updated>2019-09-03T13:32:04.346Z</updated>
    
    <content type="html"><![CDATA[<blockquote><ul><li>原文地址：<a href="http://morningcoffee.io/killing-a-process-and-all-of-its-descendants.html" target="_blank" rel="noopener">Killing a process and all of its descendants</a></li><li>原文作者：<a href="https://twitter.com/igor_sarcevic" target="_blank" rel="noopener">igor_sarcevic</a></li><li>译文出自：<a href="https://github.com/xitu/gold-miner" target="_blank" rel="noopener">掘金翻译计划</a></li><li>本文永久链接：<a href="https://github.com/xitu/gold-miner/blob/master/TODO1/killing-a-process-and-all-of-its-descendants.md" target="_blank" rel="noopener">https://github.com/xitu/gold-miner/blob/master/TODO1/killing-a-process-and-all-of-its-descendants.md</a></li><li>译者：<a href="http://jalan.space">江五渣</a></li><li>校对者：<a href="https://github.com/TokenJan" target="_blank" rel="noopener">TokenJan</a>，<a href="https://github.com/portandbridge" target="_blank" rel="noopener">portandbridge</a></li></ul></blockquote><h1 id="如何杀死一个进程和它的所有子进程"><a href="#如何杀死一个进程和它的所有子进程" class="headerlink" title="如何杀死一个进程和它的所有子进程"></a>如何杀死一个进程和它的所有子进程</h1><p>在类 Unix 系统中杀死进程比预期中更棘手。上周我在调试一个在 Semaphore 中终止作业的问题。更具体地说，这是一个有关于在作业中终止正在运行的进程的问题。以下是我从中学到的要点：</p><ul><li>类 Unix 操作系统有着复杂的进程间关系：父子进程、进程组、会话、会话的领导进程。但是，在 Linux 与 MacOS 等操作系统中，这其中的细节并不统一。符合 POSIX 的操作系统支持使用负 PID 向进程组发送信号。</li><li>使用系统调用向会话中的所有进程发送信号并非易事。</li><li>用 exec 启动的子进程将继承其父进程的信号配置。例如，如果父进程忽略 SIGHUP 信号，它的子进程也会忽略 SIGHUP 信号。</li><li>“孤儿进程组内发生了什么”这一问题的答案并不简单。</li></ul><h2 id="杀死父进程并不会同时杀死子进程"><a href="#杀死父进程并不会同时杀死子进程" class="headerlink" title="杀死父进程并不会同时杀死子进程"></a>杀死父进程并不会同时杀死子进程</h2><p>每个进程都有一个父进程。我们可以使用 <code>pstree</code> 或 <code>ps</code> 工具来观察这一点。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动两个虚拟进程</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sleep 100 &amp;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sleep 101 &amp;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> pstree -p</span></span><br><span class="line">init(1)-+</span><br><span class="line">        |-bash(29051)-+-pstree(29251)</span><br><span class="line">                      |-sleep(28919)</span><br><span class="line">                      `-sleep(28964)</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> ps j -A</span></span><br><span class="line"> PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND</span><br><span class="line">    0     1     1     1 ?           -1 Ss       0   0:03 /sbin/init</span><br><span class="line">29051  1470  1470 29051 pts/2     2386 SN    1000   0:00 sleep 100</span><br><span class="line">29051  1538  1538 29051 pts/2     2386 SN    1000   0:00 sleep 101</span><br><span class="line">29051  2386  2386 29051 pts/2     2386 R+    1000   0:00 ps j -A</span><br><span class="line">    1 29051 29051 29051 pts/2     2386 Ss    1000   0:00 -bash</span><br></pre></td></tr></table></figure><p>调用 <code>ps</code> 命令可以显示 PID（进程 ID） 和 PPID（父进程 ID）。</p><p>我对父子进程间的关系有着错误的假设。我认为如果我杀死了父进程，那么也会杀死它的所有子进程。然而这是错误的。相反，子进程将会成为孤儿进程，而 init 进程将重新成为它们的父进程。</p><p>让我们看看通过终止 bash 进程（sleep 命令的当前父进程）来重建进程间的父子关系后发生了哪些变化。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">kill</span> 29051 <span class="comment"># 杀死 bash 进程</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> pstree -A</span></span><br><span class="line">init(1)-+</span><br><span class="line">        |-sleep(28919)</span><br><span class="line">        `-sleep(28965)</span><br></pre></td></tr></table></figure><p>于我而言，重新分配父进程的行为很奇怪。例如，当我使用 SSH 登录一台服务器，启动一个进程，然后退出时，我启动的进程将会被终止。我错误地认为这是 Linux 上的默认行为。当我离开一个 SSH 会话时，进程的终止与进程组、会话的领导进程和控制终端都有关。</p><h2 id="什么是进程组和会话领导进程？"><a href="#什么是进程组和会话领导进程？" class="headerlink" title="什么是进程组和会话领导进程？"></a>什么是进程组和会话领导进程？</h2><p>让我们再次观察上述事例中 <code>ps j</code> 命令的输出。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ps j -A</span></span><br><span class="line"> PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND</span><br><span class="line">    0     1     1     1 ?           -1 Ss       0   0:03 /sbin/init</span><br><span class="line">29051  1470  1470 29051 pts/2     2386 SN    1000   0:00 sleep 100</span><br><span class="line">29051  1538  1538 29051 pts/2     2386 SN    1000   0:00 sleep 101</span><br><span class="line">29051  2386  2386 29051 pts/2     2386 R+    1000   0:00 ps j -A</span><br><span class="line">    1 29051 29051 29051 pts/2     2386 Ss    1000   0:00 -bash</span><br></pre></td></tr></table></figure><p>除了使用 PPID 和 PID 表示的父子进程关系外，进程间还有其他两种关系：</p><ul><li>用 PGID 表示的进程组</li><li>用 SID 表示的会话</li></ul><p>我们可以在支持作业控制的 Shell 环境中观察到进程组，例如 <code>bash</code> 和 <code>zsh</code>，它们为每个管道命令都创建了一个进程组。进程组是一个或多个进程（通常与一个作业关联）的集合，可以从同一个终端接收信号。每个进程组都有一个唯一的进程组 ID。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动一个由 tail 和 grep 命令组成的进程组</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tail -f /var/<span class="built_in">log</span>/syslog | grep <span class="string">"CRON"</span> &amp;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> ps j</span></span><br><span class="line"> PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND</span><br><span class="line">29051 19701 19701 29051 pts/2    19784 SN    1000   0:00 tail -f /var/log/syslog</span><br><span class="line">29051 19702 19701 29051 pts/2    19784 SN    1000   0:00 grep CRON</span><br><span class="line">29051 19784 19784 29051 pts/2    19784 R+    1000   0:00 ps j</span><br><span class="line">29050 29051 29051 29051 pts/2    19784 Ss    1000   0:00 -bash</span><br></pre></td></tr></table></figure><p>请注意，在前半段中，<code>tail</code> 和 <code>grep</code> 的 PGID 是相同的。</p><p>会话是进程组的集合，通常由一个控制终端和一个会话领导进程组成。如果会话中有一个控制终端，它就具有单个前台进程组，除了该控制终端，会话中的所有其他进程组都是后台进程组。</p><p><img src="http://morningcoffee.io/images/killing-a-process-and-all-of-its-descendants/sessions.png" alt="会话"></p><p>并非所有的 bash 进程都是会话，但是当你使用 SSH 登录一台远程服务器时，你通常会得到一个会话。当 bash 作为会话领导进程运行时，它将 SIGHUP 信号传播给它的子进程。SIGHUP 信号的传播方式就是我一直以来坚信子进程会与父进程一起消亡的核心原因。</p><h2 id="在-Unix-中会话的实现并非一致"><a href="#在-Unix-中会话的实现并非一致" class="headerlink" title="在 Unix 中会话的实现并非一致"></a>在 Unix 中会话的实现并非一致</h2><p>在上述事例中，你可以注意到 SID （进程的会话 ID）出现的位置。它是会话中所有进程共享的 ID。</p><p>但是，你需要记住，并非所有的 Unix 系统都遵循这一实现。单一 UNIX 规范只讨论“会话领导进程”，没有类似于进程 ID 或进程组 ID 的“会话 ID”。会话领导进程是一个具有唯一进程 ID 的单进程，因此我们可以讨论的会话 ID 是会话领导者的进程 ID。</p><p>System V Release 4 引入了会话 ID。</p><p>实际上，这意味着你能在 Linux 上通过 <code>ps</code> 命令获取会话 ID，但是在 BSD 及其变体（如 MacOS）上，会话 ID 并不存在，或始终为零。</p><h2 id="杀死进程组或会话中的所有进程"><a href="#杀死进程组或会话中的所有进程" class="headerlink" title="杀死进程组或会话中的所有进程"></a>杀死进程组或会话中的所有进程</h2><p>我们可以使用该 PGID，通过 kill 命令向整个进程组发送信号：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">kill</span> -SIGTERM -- -19701</span></span><br></pre></td></tr></table></figure><p>我们用一个负数 <code>-19701</code> 向进程组发送信号。如果我们传递的是一个正数，这个数将被视为进程 ID 用于终止进程。如果我们传递的是一个负数，它被视为 PGID，用于终止整个进程组。</p><p>负数来自系统调用的直接定义。</p><p>杀死会话中的所有进程与之完全不同。如我们在前一节说到的，有些系统没有会话 ID 的概念。即使是具有会话 ID 的系统，例如 Linux，也没有提供系统调用来终止会话中的所有进程。你需要遍历 <code>/proc</code> 输出的进程树，收集所有的 SID，然后一一终止进程。</p><p>Pgrep 实现了遍历、收集并通过会话 ID 杀死进程的算法。使用以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pkill -s &lt;SID&gt;</span><br></pre></td></tr></table></figure><h2 id="被-nohup-忽略的信号传播到子进程"><a href="#被-nohup-忽略的信号传播到子进程" class="headerlink" title="被 nohup 忽略的信号传播到子进程"></a>被 nohup 忽略的信号传播到子进程</h2><p>被忽略的信号，就像是被 <code>nohup</code> 忽略的信号那样，都被传播到进程的所有子进程中。这种信号传播方式就是我上周在 bug 排查中遇到的最终瓶颈。</p><p>我的程序是用于运行 bash 命令的代理程序，而我在该程序中验证到的是，我已经建立了一个具有控制终端的 bash 会话。该控制终端是 bash 会话中其他启动进程的会话领导进程。我的进程树如下所示：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">agent -+</span><br><span class="line">       +- bash (session leader) -+</span><br><span class="line">                                 | - process1</span><br><span class="line">                                 | - process2</span><br></pre></td></tr></table></figure><p>我假设，当我使用 SIGHUP 杀死 bash 会话时，它的子进程也会同时终止。对代理的集成测试也证明了这一点。</p><p>但是，我忽略了这个代理是以 <code>nohup</code> 启动的。当你使用 <code>exec</code> 启动子进程时，就像我们在代理中启动 bash 进程一样，它会从它的父进程继承信号状态。</p><p>最后一个结论使我惊讶万分。</p><blockquote><p>如果发现译文存在错误或其他需要改进的地方，欢迎到 <a href="https://github.com/xitu/gold-miner" target="_blank" rel="noopener">掘金翻译计划</a> 对译文进行修改并 PR，也可获得相应奖励积分。文章开头的 <strong>本文永久链接</strong> 即为本文在 GitHub 上的 MarkDown 链接。</p></blockquote><hr><blockquote><p><a href="https://github.com/xitu/gold-miner" target="_blank" rel="noopener">掘金翻译计划</a> 是一个翻译优质互联网技术文章的社区，文章来源为 <a href="https://juejin.im" target="_blank" rel="noopener">掘金</a> 上的英文分享文章。内容覆盖 <a href="https://github.com/xitu/gold-miner#android" target="_blank" rel="noopener">Android</a>、<a href="https://github.com/xitu/gold-miner#ios" target="_blank" rel="noopener">iOS</a>、<a href="https://github.com/xitu/gold-miner#前端" target="_blank" rel="noopener">前端</a>、<a href="https://github.com/xitu/gold-miner#后端" target="_blank" rel="noopener">后端</a>、<a href="https://github.com/xitu/gold-miner#区块链" target="_blank" rel="noopener">区块链</a>、<a href="https://github.com/xitu/gold-miner#产品" target="_blank" rel="noopener">产品</a>、<a href="https://github.com/xitu/gold-miner#设计" target="_blank" rel="noopener">设计</a>、<a href="https://github.com/xitu/gold-miner#人工智能" target="_blank" rel="noopener">人工智能</a>等领域，想要查看更多优质译文请持续关注 <a href="https://github.com/xitu/gold-miner" target="_blank" rel="noopener">掘金翻译计划</a>、<a href="http://weibo.com/juejinfanyi" target="_blank" rel="noopener">官方微博</a>、<a href="https://zhuanlan.zhihu.com/juejinfanyi" target="_blank" rel="noopener">知乎专栏</a>。</p></blockquote>]]></content>
    
    <summary type="html">
    
      这一切是否是继父 init 的阴谋？
    
    </summary>
    
      <category term="技多不压身" scheme="http://jalan.space/categories/%E6%8A%80%E5%A4%9A%E4%B8%8D%E5%8E%8B%E8%BA%AB/"/>
    
    
      <category term="Linux" scheme="http://jalan.space/tags/Linux/"/>
    
      <category term="翻译" scheme="http://jalan.space/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
</feed>
